title: MP3
id: 19673
MP formally MPEG Audio Layer III or MPEG Audio Layer III is a coding format for digital audio developed largely by the Fraunhofer Society in Germany under the lead of Karlheinz Brandenburg with support from other digital scientists in other countries Originally defined as the third audio format of the MPEG standard it was retained and further extended defining additional bit rates and support for more audio channels as the third audio format of the subsequent MPEG standard A third version known as MPEG extended to better support lower bit rates is commonly implemented but is not a recognized standard br MP or mp as a file format commonly designates files containing an elementary stream of MPEG Audio or MPEG Audio encoded data without other complexities of the MP standard br Concerning audio compression the aspect of the standard most apparent to end users and for which it is best known MP uses lossy compression to encode data using inexact approximations and the partial discarding of data This allows a large reduction in file sizes when compared to uncompressed audio The combination of small size and acceptable fidelity led to a boom in the distribution of music over the Internet in the mid to late s with MP serving as an enabling technology at a time when bandwidth and storage were still at a premium The MP format soon became associated with controversies surrounding copyright infringement music piracy and the file ripping and sharing services MP com and Napster among others With the advent of portable media players a product category also including smartphones MP support remains near universal br MP compression works by reducing the accuracy of certain components of sound that are considered by psychoacoustic analysis to be beyond the hearing capabilities of most humans This method is commonly referred to as perceptual coding or psychoacoustic modeling The remaining audio information is then recorded in a space efficient manner using MDCT and FFT algorithms Compared to CD quality digital audio MP compression can commonly achieve a reduction in size For example an MP encoded at a constant bit rate of kbit s would result in a file approximately the size of the original CD audio In the early s compact disc players increasingly adopted support for playback of MP files on data CDs br The Moving Picture Experts Group MPEG designed MP as part of its MPEG and later MPEG standards MPEG Audio MPEG Part which included MPEG Audio Layer I II and III was approved as a committee draft for an ISO IEC standard in finalized in and published in as ISO IEC An MPEG Audio MPEG Part extension with lower sample and bit rates was published in as ISO IEC It requires only minimal modifications to existing MPEG decoders recognition of the MPEG bit in the header and addition of the new lower sample and bit rates br br br History br br br Background br br The MP lossy compression algorithm takes advantage of a perceptual limitation of human hearing called auditory masking In the American physicist Alfred M Mayer reported that a tone could be rendered inaudible by another tone of lower frequency In Richard Ehmer described a complete set of auditory curves regarding this phenomenon Between and Eberhard Zwicker did work in the areas of tuning and masking of critical frequency bands which in turn built on the fundamental research in the area from Harvey Fletcher and his collaborators at Bell Labs br Perceptual coding was first used for speech coding compression with linear predictive coding LPC which has origins in the work of Fumitada Itakura Nagoya University and Shuzo Saito Nippon Telegraph and Telephone in In Bishnu S Atal and Manfred R Schroeder at Bell Labs proposed an LPC speech codec called adaptive predictive coding that used a psychoacoustic coding algorithm exploiting the masking properties of the human ear Further optimization by Schroeder and Atal with J L Hall was later reported in a paper That same year a psychoacoustic masking codec was also proposed by M A Krasner who published and produced hardware for speech not usable as music bit compression but the publication of his results in a relatively obscure Lincoln Laboratory Technical Report did not immediately influence the mainstream of psychoacoustic codec development br The discrete cosine transform DCT a type of transform coding for lossy compression proposed by Nasir Ahmed in was developed by Ahmed with T Natarajan and K R Rao in they published their results in This led to the development of the modified discrete cosine transform MDCT proposed by J P Princen A W Johnson and A B Bradley in following earlier work by Princen and Bradley in The MDCT later became a core part of the MP algorithm br Ernst Terhardt and other collaborators constructed an algorithm describing auditory masking with high accuracy in This work added to a variety of reports from authors dating back to Fletcher and to the work that initially determined critical ratios and critical bandwidths br In Atal and Schroeder presented code excited linear prediction CELP an LPC based perceptual speech coding algorithm with auditory masking that achieved a significant data compression ratio for its time IEEE s refereed Journal on Selected Areas in Communications reported on a wide variety of mostly perceptual audio compression algorithms in The Voice Coding for Communications edition published in February reported on a wide range of established working audio bit compression technologies some of them using auditory masking as part of their fundamental design and several showing real time hardware implementations br br br Development br The genesis of the MP technology is fully described in a paper from Professor Hans Musmann who chaired the ISO MPEG Audio group for several years In December MPEG called for an audio coding standard In June audio coding algorithms were submitted Because of certain similarities between these coding proposals they were clustered into four development groups The first group was ASPEC by Fraunhofer Gesellschaft AT T France Telecom Deutsche and Thomson Brandt The second group was MUSICAM by Matsushita CCETT ITT and Philips The third group was ATAC ATRAC Coding by Fujitsu JVC NEC and Sony And the fourth group was SB ADPCM by NTT and BTRL br The immediate predecessors of MP were Optimum Coding in the Frequency Domain OCF and Perceptual Transform Coding PXFM These two codecs along with block switching contributions from Thomson Brandt were merged into a codec called ASPEC which was submitted to MPEG and which won the quality competition but that was mistakenly rejected as too complex to implement The first practical implementation of an audio perceptual coder OCF in hardware Krasner s hardware was too cumbersome and slow for practical use was an implementation of a psychoacoustic transform coder based on Motorola DSP chips br Another predecessor of the MP format and technology is to be found in the perceptual codec MUSICAM based on an integer arithmetics sub bands filter bank driven by a psychoacoustic model It was primarily designed for Digital Audio Broadcasting digital radio and digital TV and its basic principles were disclosed to the scientific community by CCETT France and IRT Germany in Atlanta during an IEEE ICASSP conference in after having worked on MUSICAM with Matsushita and Philips since br This codec incorporated into a broadcasting system using COFDM modulation was demonstrated on air and in the field with Radio Canada and CRC Canada during the NAB show Las Vegas in The implementation of the audio part of this broadcasting system was based on a two chip encoder one for the subband transform one for the psychoacoustic model designed by the team of G Stoll IRT Germany later known as psychoacoustic model I and a real time decoder using one Motorola DSP chip running an integer arithmetics software designed by Y F Dehery s team CCETT France The simplicity of the corresponding decoder together with the high audio quality of this codec using for the first time a kHz sampling rate a bits sample input format the highest available sampling standard in compatible with the AES EBU professional digital input studio standard were the main reasons to later adopt the characteristics of MUSICAM as the basic features for an advanced digital music compression codec br During the development of the MUSICAM encoding software Stoll and Dehery s team made thorough use of a set of high quality audio assessment material selected by a group of audio professionals from the European Broadcasting Union and later used as a reference for the assessment of music compression codecs The subband coding technique was found to be efficient not only for the perceptual coding of high quality sound materials but especially for the encoding of critical percussive sound materials drums triangle due to the specific temporal masking effect of the MUSICAM sub band filterbank this advantage being a specific feature of short transform coding techniques br As a doctoral student at Germany s University of Erlangen Nuremberg Karlheinz Brandenburg began working on digital music compression in the early s focusing on how people perceive music He completed his doctoral work in MP is directly descended from OCF and PXFM representing the outcome of the collaboration of Brandenburg working as a postdoctoral researcher at AT T Bell Labs with James D Johnston JJ of AT T Bell Labs with the Fraunhofer Institute for Integrated Circuits Erlangen where he worked with Bernhard Grill and four other researchers The Original Six with relatively minor contributions from the MP branch of psychoacoustic sub band coders In Brandenburg became an assistant professor at Erlangen Nuremberg While there he continued to work on music compression with scientists at the Fraunhofer Society s Heinrich Herz Institute In he joined the staff of Fraunhofer HHI An acapella version of the song Tom s Diner by Suzanne Vega was the first song used by Brandenburg to develop the MP format It was used as a benchmark to see how well MP s compression algorithm handled the human voice Brandenburg adopted the song for testing purposes listening to it again and again each time he refined the compression algorithm making sure it did not adversely affect the reproduction of Vega s voice Accordingly he dubbed Vega the Mother of MP Instrumental music had been easier to compress but Vega s voice sounded unnatural in early versions of the format Brandenburg eventually met Vega and heard Tom s Diner performed live br br br Standardization br In two available proposals were assessed for an MPEG audio standard MUSICAM Masking pattern adapted Universal Subband Integrated Coding And Multiplexing and ASPEC Adaptive Spectral Perceptual Entropy Coding The MUSICAM technique proposed by Philips Netherlands CCETT France the Institute for Broadcast Technology Germany and Matsushita Japan was chosen due to its simplicity and error robustness as well as for its high level of computational efficiency The MUSICAM format based on sub band coding became the basis for the MPEG Audio compression format incorporating for example its frame structure header format sample rates etc br While much of MUSICAM technology and ideas were incorporated into the definition of MPEG Audio Layer I and Layer II the filter bank alone and the data structure based on samples framing file format and byte oriented stream of MUSICAM remained in the Layer III MP format as part of the computationally inefficient hybrid filter bank Under the chairmanship of Professor Musmann of the Leibniz University Hannover the editing of the standard was delegated to Leon van de Kerkhof Netherlands Gerhard Stoll Germany and Yves Fran ois Dehery France who worked on Layer I and Layer II ASPEC was the joint proposal of AT T Bell Laboratories Thomson Consumer Electronics Fraunhofer Society and CNET It provided the highest coding efficiency br A working group consisting of van de Kerkhof Stoll Leonardo Chiariglione CSELT VP for Media Yves Fran ois Dehery Karlheinz Brandenburg Germany and James D Johnston United States took ideas from ASPEC integrated the filter bank from Layer II added some of their ideas such as the joint stereo coding of MUSICAM and created the MP format which was designed to achieve the same quality at kbit s as MP at kbit s br The algorithms for MPEG Audio Layer I II and III were approved in and finalized in as part of MPEG the first standard suite by MPEG which resulted in the international standard ISO IEC a k a MPEG Audio or MPEG Part published in Files or data streams conforming to this standard must handle sample rates of k and k and continue to be supported by current MP players and decoders Thus the first generation of MP defined interpretations of MP frame data structures and size layouts br The compression efficiency of encoders is typically defined by the bit rate because the compression ratio depends on the bit depth and sampling rate of the input signal Nevertheless compression ratios are often published They may use the compact disc CD parameters as references kHz channels at bits per channel or bit or sometimes the Digital Audio Tape DAT SP parameters kHz bit Compression ratios with this latter reference are higher which demonstrates the problem with the use of the term compression ratio for lossy encoders br Karlheinz Brandenburg used a CD recording of Suzanne Vega s song Tom s Diner to assess and refine the MP compression algorithm This song was chosen because of its nearly monophonic nature and wide spectral content making it easier to hear imperfections in the compression format during playbacks This particular track has an interesting property in that the two channels are almost but not completely the same leading to a case where Binaural Masking Level Depression causes spatial unmasking of noise artifacts unless the encoder properly recognizes the situation and applies corrections similar to those detailed in the MPEG AAC psychoacoustic model Some more critical audio excerpts glockenspiel triangle accordion etc were taken from the EBU V SQAM reference compact disc and have been used by professional sound engineers to assess the subjective quality of the MPEG Audio formats br br br Going public br A reference simulation software implementation written in the C language and later known as ISO was developed in by the members of the ISO MPEG Audio committee to produce bit compliant MPEG Audio files Layer Layer Layer It was approved as a committee draft of the ISO IEC technical report in March and printed as document CD in April It was approved as a draft technical report DTR DIS in November finalized in and published as international standard ISO IEC TR in The reference software in C language was later published as a freely available ISO standard Working in non real time on several operating systems it was able to demonstrate the first real time hardware decoding DSP based of compressed audio Some other real time implementations of MPEG Audio encoders and decoders were available for digital broadcasting radio DAB television DVB towards consumer receivers and set top boxes br On July the Fraunhofer Society released the first software MP encoder called l enc The filename extension mp was chosen by the Fraunhofer team on July previously the files had been named bit With the first real time software MP player WinPlay released September many people were able to encode and playback MP files on their PCs Because of the relatively small hard drives of the era MB lossy compression was essential to store multiple albums worth of music on a home computer as full recordings as opposed to MIDI notation or tracker files which combined notation with short recordings of instruments playing single notes br br br Fraunhofer example implementation br A hacker named SoloH discovered the source code of the dist MPEG reference implementation shortly after the release on the servers of the University of Erlangen He developed a higher quality version and spread it on the internet This code started the widespread CD ripping and digital music distribution as MP over the internet br br br Further versions br Further work on MPEG audio was finalized in as part of the second suite of MPEG standards MPEG more formally known as international standard ISO IEC a k a MPEG Part or backward compatible MPEG Audio or MPEG Audio BC originally published in MPEG Part ISO IEC defined additional bit rates and sample rates for MPEG Audio Layer I II and III The new sampling rates are exactly half that of those originally defined in MPEG Audio This reduction in sampling rates serves to cut the available frequency fidelity in half while likewise cutting the bit rate by MPEG Part also enhanced MPEG s audio by allowing the coding of audio programs with more than two channels up to multichannel An MP coded with MPEG results in half of the bandwidth reproduction of MPEG appropriate for piano and singing br A third generation of MP style data streams files extended the MPEG ideas and implementation but was named MPEG audio since MPEG already had a different meaning This extension was developed at Fraunhofer IIS the registered patent holder of MP by reducing the frame sync field in the MP header from to bits As in the transition from MPEG to MPEG MPEG adds additional sampling rates exactly half of those available using MPEG It thus widens the scope of MP to include human speech and other applications yet requires only of the bandwidth frequency reproduction possible using MPEG sampling rates While not an ISO recognized standard MPEG is widely supported by both inexpensive Chinese and brand name digital audio players as well as computer software based MP encoders LAME decoders FFmpeg and players MPC adding additional MP frame types Each generation of MP thus supports sampling rates exactly half that of the previous generation for a total of varieties of MP format files The sample rate comparison table between MPEG and is given later in the article MPEG is supported by LAME since Media Player Classic MPC iTunes and FFmpeg br MPEG was not developed by MPEG see above and was never approved as an international standard MPEG is thus an unofficial or proprietary extension to the MP format It is nonetheless ubiquitous and especially advantageous for low bit rate human speech applications br br LAME is the most advanced MP encoder LAME includes a variable bit rate VBR encoding which uses a quality parameter rather than a bit rate goal Later versions support an n nnn quality goal which automatically selects MPEG or MPEG sampling rates as appropriate for human speech recordings that need only Hz bandwidth resolution br br br Internet distribution br In the second half of the s MP files began to spread on the Internet often via underground pirated song networks The first known experiment in Internet distribution was organized in the early s by the Internet Underground Music Archive better known by the acronym IUMA After some experiments using uncompressed audio files this archive started to deliver on the native worldwide low speed Internet some compressed MPEG Audio files using the MP Layer II format and later on used MP files when the standard was fully completed The popularity of MP s began to rise rapidly with the advent of Nullsoft s audio player Winamp released in which still had in a community of million active users In the first portable solid state digital audio player MPMan developed by SaeHan Information Systems which is headquartered in Seoul South Korea was released and the Rio PMP was sold afterward in despite legal suppression efforts by the RIAA br In November the website mp com was offering thousands of MP s created by independent artists for free The small size of MP files enabled widespread peer to peer file sharing of music ripped from CDs which would have previously been nearly impossible The first large peer to peer filesharing network Napster was launched in The ease of creating and sharing MP s resulted in widespread copyright infringement Major record companies argued that this free sharing of music reduced sales and called it music piracy They reacted by pursuing lawsuits against Napster which was eventually shut down and later sold and against individual users who engaged in file sharing br Unauthorized MP file sharing continues on next generation peer to peer networks Some authorized services such as Beatport Bleep Juno Records eMusic Zune Marketplace Walmart com Rhapsody the recording industry approved re incarnation of Napster and Amazon com sell unrestricted music in the MP format br br br Design br br br File structure br br An MP file is made up of MP frames which consist of a header and a data block This sequence of frames is called an elementary stream Due to the bit reservoir frames are not independent items and cannot usually be extracted on arbitrary frame boundaries The MP Data blocks contain the compressed audio information in terms of frequencies and amplitudes The diagram shows that the MP Header consists of a sync word which is used to identify the beginning of a valid frame This is followed by a bit indicating that this is the MPEG standard and two bits that indicate that layer is used hence MPEG Audio Layer or MP After this the values will differ depending on the MP file ISO IEC defines the range of values for each section of the header along with the specification of the header Most MP files today contain ID metadata which precedes or follows the MP frames as noted in the diagram The data stream can contain an optional checksum br Joint stereo is done only on a frame to frame basis br br br Encoding and decoding br The MP encoding algorithm is generally split into four parts Part divides the audio signal into smaller pieces called frames and an MDCT filter is then performed on the output Part passes the sample into a point fast Fourier transform FFT then the psychoacoustic model is applied and another MDCT filter is performed on the output Part quantifies and encodes each sample known as noise allocation which adjusts itself to meet the bit rate and sound masking requirements Part formats the bitstream called an audio frame which is made up of parts the header error check audio data and ancillary data br The MPEG standard does not include a precise specification for an MP encoder but does provide examples of psychoacoustic models rate loops and the like in the non normative part of the original standard MPEG doubles the number of sampling rates that are supported and MPEG adds more When this was written the suggested implementations were quite dated Implementers of the standard were supposed to devise algorithms suitable for removing parts of the information from the audio input As a result many different MP encoders became available each producing files of differing quality Comparisons were widely available so it was easy for a prospective user of an encoder to research the best choice Some encoders that were proficient at encoding at higher bit rates such as LAME were not necessarily as good at lower bit rates Over time LAME evolved on the SourceForge website until it became the de facto CBR MP encoder Later an ABR mode was added Work progressed on true variable bit rate using a quality goal between and Eventually numbers such as V could generate excellent quality low bit rate voice encoding at only kbit s using the MPEG extensions br MP uses an overlapping MDCT structure Each MPEG MP frame is samples divided into two granules of samples These samples initially in the time domain are transformed in one block to frequency domain samples by MDCT MP also allows the use of shorter blocks in a granule down to a size of samples this feature is used when a transient is detected Doing so limits the temporal spread of quantization noise accompanying the transient see psychoacoustics Frequency resolution is limited by the small long block window size which decreases coding efficiency Time resolution can be too low for highly transient signals and may cause smearing of percussive sounds br Due to the tree structure of the filter bank pre echo problems are made worse as the combined impulse response of the two filter banks does not and cannot provide an optimum solution in time frequency resolution Additionally the combining of the two filter banks outputs creates aliasing problems that must be handled partially by the aliasing compensation stage however that creates excess energy to be coded in the frequency domain thereby decreasing coding efficiency br Decoding on the other hand is carefully defined in the standard Most decoders are bitstream compliant which means that the decompressed output that they produce from a given MP file will be the same within a specified degree of rounding tolerance as the output specified mathematically in the ISO IEC high standard document ISO IEC Therefore the comparison of decoders is usually based on how computationally efficient they are i e how much memory or CPU time they use in the decoding process Over time this concern has become less of an issue as CPU clock rates transitioned from MHz to GHz Encoder decoder overall delay is not defined which means there is no official provision for gapless playback However some encoders such as LAME can attach additional metadata that will allow players that can handle it to deliver seamless playback br br br Quality br When performing lossy audio encoding such as creating an MP data stream there is a trade off between the amount of data generated and the sound quality of the results The person generating an MP selects a bit rate which specifies how many kilobits per second of audio is desired The higher the bit rate the larger the MP data stream will be and generally the closer it will sound to the original recording With too low a bit rate compression artifacts i e sounds that were not present in the original recording may be audible in the reproduction Some audio is hard to compress because of its randomness and sharp attacks When this type of audio is compressed artifacts such as ringing or pre echo are usually heard A sample of applause or a triangle instrument with a relatively low bit rate provides good examples of compression artifacts Most subjective testings of perceptual codecs tend to avoid using these types of sound materials however the artifacts generated by percussive sounds are barely perceptible due to the specific temporal masking feature of the sub band filterbank of Layer II on which the format is based br Besides the bit rate of an encoded piece of audio the quality of MP encoded sound also depends on the quality of the encoder algorithm as well as the complexity of the signal being encoded As the MP standard allows quite a bit of freedom with encoding algorithms different encoders do feature quite different quality even with identical bit rates As an example in a public listening test featuring two early MP encoders set at about kbit s one scored on a scale while the other scored only Quality is dependent on the choice of encoder and encoding parameters br This observation caused a revolution in audio encoding Early on bit rate was the prime and only consideration At the time MP files were of the very simplest type they used the same bit rate for the entire file this process is known as constant bit rate CBR encoding Using a constant bit rate makes encoding simpler and less CPU intensive However it is also possible to optimize the size of the file by creating files where the bit rate changes throughout the file These are known as variable bit rate The bit reservoir and VBR encoding were part of the original MPEG standard The concept behind them is that in any piece of audio some sections are easier to compress such as silence or music containing only a few tones while others will be more difficult to compress So the overall quality of the file may be increased by using a lower bit rate for the less complex passages and a higher one for the more complex parts With some advanced MP encoders it is possible to specify a given quality and the encoder will adjust the bit rate accordingly Users that desire a particular quality setting that is transparent to their ears can use this value when encoding all of their music and generally speaking not need to worry about performing personal listening tests on each piece of music to determine the correct bit rate br Perceived quality can be influenced by the listening environment ambient noise listener attention listener training and in most cases by listener audio equipment such as sound cards speakers and headphones Furthermore sufficient quality may be achieved by a lesser quality setting for lectures and human speech applications and reduces encoding time and complexity A test given to new students by Stanford University Music Professor Jonathan Berger showed that student preference for MP quality music has risen each year Berger said the students seem to prefer the sizzle sounds that MP s bring to music br An in depth study of MP audio quality sound artist and composer Ryan Maguire s project The Ghost in the MP isolates the sounds lost during MP compression In he released the track moDernisT an anagram of Tom s Diner composed exclusively from the sounds deleted during MP compression of the song Tom s Diner the track originally used in the formulation of the MP standard A detailed account of the techniques used to isolate the sounds deleted during MP compression along with the conceptual motivation for the project was published in the Proceedings of the International Computer Music Conference br br br Bit rate br br Bit rate is the product of the sample rate and number of bits per sample used to encode the music CD audio is samples per second The number of bits per sample also depends on the number of audio channels The CD is stereo and bits per channel So multiplying by gives the bit rate of uncompressed CD digital audio MP was designed to encode this kbit s data at kbit s or less If less complex passages are detected by the MP algorithms then lower bit rates may be employed When using MPEG instead of MPEG MP supports only lower sampling rates or samples per second and offers choices of bit rate as low as kbit s but no higher than kbit s By lowering the sampling rate MPEG layer III removes all frequencies above half the new sampling rate that may have been present in the source audio br As shown in these two tables selected bit rates are allowed in MPEG Audio Layer III standard and kbit s along with the highest available sampling rates of and kHz MPEG Audio Layer III also allows somewhat different and mostly lower bit rates of kbit s with sampling rates of and kHz which are exactly half that of MPEG MPEG Audio Layer III frames are limited to only bit rates of and kbit s with even lower sampling rates of and kHz On earlier systems that only support the MPEG Audio Layer III standard MP files with a bit rate below kbit s might be played back sped up and pitched up br Earlier systems also lack fast forwarding and rewinding playback controls on MP br MPEG frames contain the most detail in kbit s mode the highest allowable bit rate setting with silence and simple tones still requiring kbit s MPEG frames can capture up to kHz sound reproductions needed up to kbit s MP files made with MPEG do not have kHz bandwidth because of the Nyquist Shannon sampling theorem Frequency reproduction is always strictly less than half of the sampling rate and imperfect filters require a larger margin for error noise level versus sharpness of filter so an kHz sampling rate limits the maximum frequency to kHz while a kHz sampling rate limits an MP to a maximum kHz sound reproduction MPEG uses half and MPEG only a quarter of MPEG sample rates br For the general field of human speech reproduction a bandwidth of Hz is sufficient to produce excellent results for voice using the sampling rate of and VBR encoding from standard WAV file English speakers average kbit s with V setting but this may vary with the amount of silence recorded or the rate of delivery wpm Resampling to K bandwidth is selected by the LAME parameter V Likewise V selects a sample rate and a resultant K lowpass filtering Older versions of LAME and FFmpeg only support integer arguments for the variable bit rate quality selection parameter The n nnn quality parameter V is documented at lame sourceforge net but is only supported in LAME with the new style VBR variable bit rate quality selector not average bit rate ABR br A sample rate of kHz is commonly used for music reproduction because this is also used for CD audio the main source used for creating MP files A great variety of bit rates are used on the Internet A bit rate of kbit s is commonly used at a compression ratio of offering adequate audio quality in a relatively small space As Internet bandwidth availability and hard drive sizes have increased higher bit rates up to kbit s are widespread Uncompressed audio as stored on an audio CD has a bit rate of kbit s bit sample samples second channels bits kilobit so the bit rates and kbit s represent compression ratios of approximately and respectively br Non standard bit rates up to kbit s can be achieved with the LAME encoder and the free format option although few MP players can play those files According to the ISO standard decoders are only required to be able to decode streams up to kbit s Early MPEG Layer III encoders used what is now called constant bit rate CBR The software was only able to use a uniform bit rate on all frames in an MP file Later more sophisticated MP encoders were able to use the bit reservoir to target an average bit rate selecting the encoding rate for each frame based on the complexity of the sound in that portion of the recording br A more sophisticated MP encoder can produce variable bit rate audio MPEG audio may use bit rate switching on a per frame basis but only layer III decoders must support it VBR is used when the goal is to achieve a fixed level of quality The final file size of a VBR encoding is less predictable than with constant bit rate Average bit rate is a type of VBR implemented as a compromise between the two the bit rate is allowed to vary for more consistent quality but is controlled to remain near an average value chosen by the user for predictable file sizes Although an MP decoder must support VBR to be standards compliant historically some decoders have bugs with VBR decoding particularly before VBR encoders became widespread The most evolved LAME MP encoder supports the generation of VBR ABR and even the older CBR MP formats br Layer III audio can also use a bit reservoir a partially full frame s ability to hold part of the next frame s audio data allowing temporary changes in effective bit rate even in a constant bit rate stream Internal handling of the bit reservoir increases encoding delay There is no scale factor band sfb for frequencies above approx kHz forcing the encoder to choose between less accurate representation in band or less efficient storage in all bands below band the latter resulting in wasted bit rate in VBR encoding br br br Ancillary data br The ancillary data field can be used to store user defined data The ancillary data is optional and the number of bits available is not explicitly given The ancillary data is located after the Huffman code bits and ranges to where the next frame s main data begin points to Encoder mp PRO used ancillary data to encode extra information which could improve audio quality when decoded with its algorithm br br br Metadata br br A tag in an audio file is a section of the file that contains metadata such as the title artist album track number or other information about the file s contents The MP standards do not define tag formats for MP files nor is there a standard container format that would support metadata and obviate the need for tags However several de facto standards for tag formats exist As of the most widespread are ID v and ID v and the more recently introduced APEv These tags are normally embedded at the beginning or end of MP files separate from the actual MP frame data MP decoders either extract information from the tags or just treat them as ignorable non MP junk data br Playing and editing software often contains tag editing functionality but there are also tag editor applications dedicated to the purpose Aside from metadata about the audio content tags may also be used for DRM ReplayGain is a standard for measuring and storing the loudness of an MP file audio normalization in its metadata tag enabling a ReplayGain compliant player to automatically adjust the overall playback volume for each file MP Gain may be used to reversibly modify files based on ReplayGain measurements so that adjusted playback can be achieved on players without ReplayGain capability br br br Licensing ownership and legislation br The basic MP decoding and encoding technology is patent free in the European Union all patents having expired there by at the latest In the United States the technology became substantially patent free on April see below MP patents expired in the US between and In the past many organizations have claimed ownership of patents related to MP decoding or encoding These claims led to several legal threats and actions from a variety of sources As a result in countries that allow software patents uncertainty about which patents must have been licensed to create MP products without committing patent infringement was common in the early stages of the technology s adoption br The initial near complete MPEG standard parts and was publicly available on December as ISO CD In most countries patents cannot be filed after prior art has been made public and patents expire years after the initial filing date which can be up to months later for filings in other countries As a result patents required to implement MP expired in most countries by December years after the publication of ISO CD br An exception is the United States where patents in force but filed before June expire after the later of years from the issue date or years from the priority date A lengthy patent prosecution process may result in a patent issued much later than normally expected see submarine patents The various MP related patents expired on dates ranging from to in the United States Patents for anything disclosed in ISO CD filed a year or more after its publication are questionable If only the known MP patents filed by December are considered then MP decoding has been patent free in the US since September when U S patent which had a PCT filing in October expired If the longest running patent mentioned in the aforementioned references is taken as a measure then the MP technology became patent free in the United States on April when U S patent held and administered by Technicolor expired As a result many free and open source software projects such as the Fedora operating system have decided to start shipping MP support by default and users will no longer have to resort to installing unofficial packages maintained by third party software repositories for MP playback or encoding br Technicolor formerly called Thomson Consumer Electronics claimed to control MP licensing of the Layer patents in many countries including the United States Japan Canada and EU countries Technicolor had been actively enforcing these patents MP license revenues from Technicolor s administration generated about million for the Fraunhofer Society in In September the Fraunhofer Institute sent a letter to several developers of MP software stating that a license was required to distribute and or sell decoders and or encoders The letter claimed that unlicensed products infringe the patent rights of Fraunhofer and Thomson To make sell or distribute products using the MPEG Layer standard and thus our patents you need to obtain a license under these patents from us This led to the situation where the LAME MP encoder project could not offer its users official binaries that could run on their computer The project s position was that as source code LAME was simply a description of how an MP encoder could be implemented Unofficially compiled binaries were available from other sources br Sisvel S p A a Luxembourg based company administers licenses for patents applying to MPEG Audio They along with its United States subsidiary Audio MPEG Inc previously sued Thomson for patent infringement on MP technology but those disputes were resolved in November with Sisvel granting Thomson a license to their patents Motorola followed soon after and signed with Sisvel to license MP related patents in December Except for three patents the US patents administered by Sisvel had all expired in The three exceptions are U S patent expired February U S patent expired February and U S patent expired April As of around the first quarter of Sisvel s licensing program has become a legacy br In September German officials seized MP players from SanDisk s booth at the IFA show in Berlin after an Italian patents firm won an injunction on behalf of Sisvel against SanDisk in a dispute over licensing rights The injunction was later reversed by a Berlin judge but that reversal was in turn blocked the same day by another judge from the same court bringing the Patent Wild West to Germany in the words of one commentator In February Texas MP Technologies sued Apple Samsung Electronics and Sandisk in eastern Texas federal court claiming infringement of a portable MP player patent that Texas MP said it had been assigned Apple Samsung and Sandisk all settled the claims against them in January br Alcatel Lucent has asserted several MP coding and compression patents allegedly inherited from AT T Bell Labs in litigation of its own In November before the companies merger Alcatel sued Microsoft for allegedly infringing seven patents On February a San Diego jury awarded Alcatel Lucent US billion in damages for infringement of two of them The court subsequently revoked the award however finding that one patent had not been infringed and that the other was not owned by Alcatel Lucent it was co owned by AT T and Fraunhofer who had licensed it to Microsoft the judge ruled That defense judgment was upheld on appeal in br br br Alternative technologies br br Other lossy formats exist Among these Advanced Audio Coding AAC is the most widely used and was designed to be the successor to MP There also exist other lossy formats such as mp PRO and MP They are members of the same technological family as MP and depend on roughly similar psychoacoustic models and MDCT algorithms Whereas MP uses a hybrid coding approach that is part MDCT and part FFT AAC is purely MDCT significantly improving compression efficiency Many of the basic patents underlying these formats are held by Fraunhofer Society Alcatel Lucent Thomson Consumer Electronics Bell Dolby LG Electronics NEC NTT Docomo Panasonic Sony Corporation ETRI JVC Kenwood Philips Microsoft and NTT br When the digital audio player market was taking off MP was widely adopted as the standard hence the popular name MP player Sony was an exception and used their own ATRAC codec taken from their MiniDisc format which Sony claimed was better Following criticism and lower than expected Walkman sales in Sony for the first time introduced native MP support to its Walkman players br There are also open compression formats like Opus and Vorbis that are available free of charge and without any known patent restrictions Some of the newer audio compression formats such as AAC WMA Pro Vorbis and Opus are free of some limitations inherent to the MP format that cannot be overcome by any MP encoder br Besides lossy compression methods lossless formats are a significant alternative to MP because they provide unaltered audio content though with an increased file size compared to lossy compression Lossless formats include FLAC Free Lossless Audio Codec Apple Lossless and many others br br br See also br br br br br br Further reading br Geert Lovink November Reflections on the MP Format Interview with Jonathan Sterne Computational Culture ISSN Archived from the original on August Retrieved August br br br External links br br MP at Curlie br MP history com Archived February at the Wayback Machine The Story of MP How MP was invented by Fraunhofer IIS br MP News Archive Archived March at the Wayback Machine over articles from to focused on MP and digital audio br MPEG chiariglione org Archived April at the Wayback Machine MPEG official website