title: WarpOS
id: 16864378
WarpOS is a multitasking kernel for the PowerPC PPC architecture central processing unit CPU developed by Haage Partner for the Amiga computer platform in the late s and early s It runs on PowerUP accelerator boards developed by phase which contains both a Motorola series CPU and a PowerPC CPU with shared address space WarpOS runs alongside the k based AmigaOS which can use the PowerPC as a coprocessor Despite its name it is not an operating system OS but a kernel it supplies a limited set of functions similar to those in AmigaOS for using the PowerPC When released its original name was WarpUP but was changed to reflect its greater feature set and possibly to avoid comparison with its competitor PowerUP br It was developed by Sam Jordan using x and PowerPC assembly language It was distributed free of charge br br br History br In Phase an Amiga hardware manufacturer launched their range of PowerPC PPC accelerators for the Amiga Because AmigaOS was not yet PowerPC native as a stopgap measure the PowerUP boards were dual processor boards incorporating the PPC and a K processor LC at MHz or at MHz They carried the PowerUP kernel on board in an erasable programmable read only memory EPROM a similar kernel designed to allow AmigaOS application software to use both PPC and k applications through an application programming interface API library named ppc library AmigaOS still required a K processor while the PPC was in effect used as an extremely fast coprocessor that carried out specific instructions br This causes significant slowdown when the OS task switches between the K and PPC a context switch because CPU caches must be flushed to maintain memory integrity The more CPU switches occur in an application the more the slowdown often so much that it was pointless to use the PPC processor being slower than the k native binary The main workaround for this was to simply avoid as many k OS calls as possible or to group them together but it was difficult and time consuming for developers to do this br WarpOS was launched as a controversial alternative to Phase s PowerUP kernel but eventually became the most used and nominally the standard PPC kernel on AmigaOS br br br WarpUP br WarpUP is a high speed kernel for PowerPC versions of Amiga br WarpUP forms a hardware abstraction layer between the hardware and software and ensures that the applications function correctly on PowerPC architecture It also forms an interface between PowerPC driven hardware and k compliant software which allows the optimal exploitation of the speed of the PowerPC CPU while making the porting of k applications as easy as possible br Several advantages that WarpUP claims to offer are br br High speed communication between k programs and PowerPC CPUs br Native multi tasking memory management semaphores list and tag management signalling and message handling br Memory protection tasks are allowed to allocate to protected memory areas if need be br Virtual Signals signals are shared between CPUs and will always be redirected to the correct CPU when needed br Inter CPU messaging system messages are passed between the CPUs when needed br Optimal use of the PowerPC memory management unit and the PowerPC CPU cache br Memory management unit and exception handling support for applications br PowerSave function that turns the PowerPC off if no applications are using it br PowerPC Enforcer protects the first page of memory br A detailed crash requester that provides detailed information to help developers locate errors br Integrated debugging system that enables bug tracking easier br Specific support for highly optimized software such as games and demos br Support for Amiga compliant applications br Libraries for PowerPC native mixed and fat binary applications br WarpUP is also usable for alternative developer systems such as Modula or E compilers with PowerPC support This is because objects are not mandatorily created in Executable and Linkable Format ELF Instead the Amiga compliant hunk format can be used also br Easy to install br Hardware independent br br br Features br WarpOS had similar features to PowerUP but with some major differences Most pertinently it used the PowerOpen application binary interface ABI in contrast to PowerUP which used the newer and better supported UNIX System V SysV which ensured both kernels could not be directly compatible br From version the WarpOS kernel used a slightly different multitasking scheduler than AmigaOS or PowerUP based on that in Unix systems with nice values and priorities for its own tasks and processes This was meant to ensure that all tasks got CPU time and weren t starved of CPU time by compute intensive tasks as was the case with the original AmigaOS scheduler However this was ineffective as it was still limited by the native AmigaOS scheduler and it did create extra difficulties synchronising with the k side particularly for sound In version WarpOS introduced a concept called atomic tasks Such tasks are noninterruptible and scheduling does not take place unless the task explicitly allows to do so br WarpOS also had an inbuilt debugger which could be sent to dump information on any crashed tasks to either console window on screen or to serial depending on environment variables br One of the most lauded features of WarpOS was that it continued the Amiga Hunk format of original Amiga executables in a variant format named Extended Hunk format EHF and implemented the hunk type named HUNK PPC CODE This allowed AmigaOS to transparently handle WarpOS executables without needing to patch the OS to recognise them which PowerUP did need to do to run its ELF file format While elegant in theory the EHF format s downfall was its lack of widespread compiler support especially GNU Compiler Collection GCC and the ELF file format was adopted by AmigaOS and MorphOS br Unlike PowerUP WarpOS could also produce mixed fat binaries with both k and PPC code which could run on both Amiga PPC boards and ordinary Amiga systems This practice was very rare due to the programming complexity of doing so but the picture datatype in AmigaOS a shared library that loaded processed and dithered pictures through the AmigaOS datatypes system was a notable example of its use PPC equipped systems would notice an immediate large speed up while k systems and emulators would still be compatible without having crashing or installing another binary br WarpOS had two housekeeping tasks named Defiant and Babylon thought to be named after the USS Defiant from Star Trek DS and Babylon its developers being science fiction fans These would often be reported by new users who did not know what they were appearing in tasks lists br br br Controversy br Haage Partner an Amiga software and hardware manufacturer which also created AmigaOS developed a competing kernel to PowerUP named WarpUP which they claimed would work around the context switching problem a claim which would be bitterly challenged by Phase Phase claimed correctly that this hardware problem could not be circumvented by simply optimising the kernel and was a limitation inherent to the almost unique board design which shared the memory bus between two CPUs of radically different families WarpOS versions up to V were wrappers added around Phase s PowerUP kernel but starting from version it was its own PPC kernel running alongside AmigaOS and was renamed WarpOS br As PowerUP was on the EPROM of the boards and Phase could not run at the same time with WarpOS it had to be deactivated by a small software tool As H P did not have access to the EPROM the tool had to make assumptions about the PowerUP kernel and naturally this broke in updated versions This led to open accusations by WarpOS advocates and by the author Sam Jordan that Phase were intentionally trying to prevent WarpOS running on their boards Phase also claimed that Haage Partner abused a free developer board gifted to them to launch this competing kernel although free WarpOS was supported almost exclusively by H P s commercial StormC compiler and that they had reverse engineered PowerUP to do so H P pointed out that it was unavoidable as long Phase refused to allow users to choose what kernel to put on the board EPROM claiming that the PowerUP kernel was essential for initialising the boards on boot and erasing them would simply render the boards useless br Worse still users were originally only able to run one of these kernels resulting in much duplication of effort between competing developers determined to use one or the other often with two versions of software being developed independently Despite there being little or no real difference in performance debugging capability usability or stability in either system and it had become patently clear that neither could hope to work around the hardware context switch issue a series of claims were made on each side and much fighting in Usenet followed br This resulted in a great number of hurriedly ported often semi functional ports of open source software from Windows often just to one up the other side Steffen Haeuser who had gained notoriety by declaring ELF is a monster referring to the ELF fileformat of Hyperion Entertainment CVBA was particularly infamous for his political ports being so rushed that they lacked sound or were very unstable being released just to make up the numbers and produce a list of software greater than that of PowerUP br The impasse between the competing systems was eventually ended by a PowerUP wrapper for WarpOS by Franke Wille which allowed running PowerUP software on WarpOS systems br The bitter infighting in the Amiga community over the two kernels while brief produced a rift that eventually culminated in a split between AmigaOS and MorphOS with most WarpOS and PowerUP developers switching either new AmigaOS implementation respectively br WarpOS was intended to be used as a basis for AmigaOS but Haage Partner dropped the project when their AmigaOS PPC contract was cancelled by Amiga Inc in When Hyperion Entertainment took over the project they originally had the same idea but it was later admitted by their developers that it was of very little use in modernising the OS being written wholly in non annotated machine code assembly language br The choice of WarpOS over its rival proved to be a Pyrrhic victory as the standards it had developed around namely EHF and PowerOpen were to be wholly abandoned in later development of AmigaOS and its clones The dual CPU model did not recur br br br Legacy support in other operating systems br AmigaOS br A wrapper was made for AmigaOS first it was included then it was distributed by GuruMedation team not to be confused by Amiga s Blue Screen of death that also has the same name This wrapper supported PowerPC e e AMCC EP G and G CPU s But failed to work on AMCC and P A Semi PA T br Work is under way to make new wrapper named ReWarp A group named Sakura is responsible for the new wrapper br br br MorphOS br MorphOS also uses a wrapper to run WarpUP programs they also have a wrapper for PowerUP a WarpOS competitor br br br Games for WarpOS br CrossFire II br Descent FreeSpace The Great War br Game was first released on WarpOS then ported to AmigaOS br br ADoomPPC br Original title DOOM br br Earth br AmiHeretic br Heretic II br Only for WarpOS not for AmigaOS br br WarpHexen br Original title Hexen Beyond Heretic br Same game named UHexen for AmigaOS br br Nightlong Union City Conspiracy br Payback br AmiQuake br The Feeble Files br Quake II br Game was first released on WarpOS then ported to AmigaOS br br Shogo Mobile Armor Division br Only for WarpOS not for AmigaOS br br Wipeout br Only for WarpOS not for AmigaOS br br br Demos for WarpOS br PPC Warp D demo by CdBS Software nd at UkonxParty br V Demo PPC Warp D by CdBS Software br DeathTrial FixPatch br MusicDisk Earth Tribe Media br One Day Miracle by Fit ASM k intro br Booring Trip PPC for UkonxParty in France br Greuh Zillement Beta nd LTP br Salvation PPC dentro by Horizontal Lamerz br Flow Winner kb at FuckYanica One br Megademo IV Quick PPC port br DeathTrial by Mkd AGA CGXwarposPPCAhi dbplayer br Equinoxe demoparty invitation br PRO GEAR SPEC WarpOS PPC demo by mankind br Mankind MesaGLUT wos ahi surreal demo br by Madwizards st at Delirium br Amsterdam Blessings by Madwizards rd at M S br Cull Bazaar by Madwizards th at Assembly br Nuance Subtle Shades th place at MS K br th place at MS by NUANCE br NoSyncIzBack WOS demo rd at IGDRP br Planet Potion A kB Intro by Potion br Suicidal A kB Intro by Potion br Sayontsheck PPC AGA Demo by Lamers br Luminance PPC WOS v UKONX st at Slach br NoSync by Universe WOS demo rd at Equinoxe br PowerUp by Universe Winner WOS demo at Slash br Everything Dies by Venus Art PPC WarpUP version br Ghost by Venus Art PPC WarpUP version br br br Emulators for WarpOS br IFusion FusionPPC MacOS emulator br WarpSNES br br br Programs for WarpOS br Frogger Video player br fxpaint br perfectpaint br wosdb simple debugger br br br See also br br Amiga exec br br br br br Notes br Warpsness problems Steffen Haeuser explains WarpUp kernel at comp sys amiga games br See also pages regarding history of the PPC processor on Amiga at Amiga History site br EHF specifications Archived at the Wayback Machine on Haage Partners site br BlizzardPPC Flash Why WarpOS and Warp D have problems with Blizzard PPC br Dietrich Wolf Amiga Report Magazine Archived at the Wayback Machine Haage and Partner Announce WarpUP Phase Blasts H P br comp sys amiga games Steffen Haeuser comments ELF br ppclibemu ppc library emulation under WarpOS br List of software projects of Sam Jordan br Interview with Ben Hermans from Hyperion Benjamin Hermans comments WarpOS br Jordan S powerpc library WarpOS history br br br Further reading br Pourtant Jac November Quel noyau pour les cartes PowerPC AmigaNews in French No NewsEdition pp ISSN br News Developers go nuts over kernel Amiga Format No Future Publishing December p ISSN br Les cartes PowerUP seraient de la poudre aux yeux Dream in French No Posse Press December p ISSN br Kren elok Petr January WarpUp your PowerUp Amiga Review in Czech No Atlantida Publishing pp ISSN br Fromentin Brice Pozzi Jean Paul March Les cartes PPC PowerUP de P AmigaNews in French No NewsEdition pp ISSN br News PPC developers bury hatchets Amiga Format No Future Publishing July p ISSN br PowerPC software Amiga Review in Czech No Atlantida Publishing September pp ISSN br Drummond Richard July WarpUp Amiga Format No Future Publishing p ISSN br News NG AmigaOS for classic Amigas Amiga Format No Future Publishing May p ISSN 