title: Windows Subsystem for Linux
id: 49998667
Windows Subsystem for Linux WSL is a feature of Microsoft Windows that allows developers to run a Linux environment without the need for a separate virtual machine or dual booting There are two versions of WSL WSL and WSL br WSL is not available to all Windows users by default It can be installed either by joining the Windows Insider program or manually via Microsoft Store or Winget br WSL was first released on August and acts as a compatibility layer for running Linux binary executables in ELF format by implementing Linux system calls on the Windows kernel It is available on Windows Windows LTSB LTSC Windows Windows Server Windows Server and Windows Server br In May WSL was announced introducing important changes such as a real Linux kernel through a subset of Hyper V features WSL differs from WSL in that WSL runs inside a managed virtual machine that implements the full Linux kernel As a result WSL is compatible with more Linux binaries than WSL as not all system calls were implemented in WSL Since June WSL is available to Windows customers through the Windows Insider program including the Home edition br br br History br Microsoft s first foray into achieving Unix like compatibility on Windows began with the Microsoft POSIX Subsystem superseded by Windows Services for UNIX via MKS Interix which was eventually deprecated with the release of Windows The technology behind Windows Subsystem for Linux originated in the unreleased Project Astoria which enabled some Android applications to run on Windows Mobile It was first made available in Windows Insider Preview build br Whereas Microsoft s previous projects and the third party Cygwin had focused on creating their own unique Unix like environments based on the POSIX standard WSL aims for native Linux compatibility Instead of wrapping non native functionality into Win system calls as Cygwin did WSL s initial design WSL leveraged the NT kernel executive to serve Linux programs as special isolated minimal processes known as pico processes attached to kernel mode pico providers as dedicated system call and exception handlers distinct from that of a vanilla NT process opting to reutilize existing NT implementations wherever possible br WSL beta was introduced in Windows version Anniversary Update on August Only Ubuntu with Bash as the default shell was supported WSL beta was also called Bash on Ubuntu on Windows or Bash on Windows WSL was no longer beta in Windows version Fall Creators Update released on October Multiple Linux distributions could be installed and were available for install in the Windows Store br In Richard Stallman expressed fears that integrating Linux functionality into Windows will only hinder the development of free software calling efforts like WSL a step backward in the campaign for freedom br Though WSL via this initial design was much faster and arguably much more popular than the previous UNIX on Windows projects Windows kernel engineers found difficulty in trying to increase WSL s performance and syscall compatibility by trying to reshape the existing NT kernel to recognize and operate correctly on Linux s API At a Microsoft Ignite conference in Microsoft engineers gave a high level overview of a new lightweight Hyper V VM technology for containerization where a virtualized kernel could make direct use of NT primitives on the host In Microsoft announced a completely redesigned WSL architecture WSL using this lightweight VM technology hosting actual customized Linux kernel images claiming full syscall compatibility Microsoft announced WSL on May and it was shipped with Windows version It was also backported to Windows version and br GPU support for WSL to run GPU accelerated machine learning was introduced in Windows build GUI support for WSL to run Linux applications with graphical user interfaces GUIs was introduced in Windows build Both of them are shipped in Windows br In April Microsoft released a Windows test build that also includes the ability to run Linux graphical user interface GUI apps using WSL and CBL Mariner The Windows Subsystem for Linux GUI WSLg was officially released at the Microsoft Build conference It is included in Windows Insider build or later br Microsoft introduced a Microsoft Store version of WSL on October for Windows It reached version on November with added support for Windows br br br Notable releases br br br Features br br WSL is available in Windows Server and in versions of Windows from version though only in bit versions br Microsoft envisages WSL as primarily a tool for developers especially web developers and those who work on or with open source projects In September Microsoft said that WSL requires fewer resources CPU memory and storage than a full virtual machine which prior to WSL was the most direct way to run Linux software in a Windows environment while also allowing users to use Windows apps and Linux tools on the same set of files br The first release of WSL provides a Linux compatible kernel interface developed by Microsoft containing no Linux kernel code which can then run the user space of a Linux distribution on top of it such as Ubuntu openSUSE SUSE Linux Enterprise Server Debian and Kali Linux Such a user space might contain a GNU Bash shell and command language with native GNU command line tools sed awk etc programming language interpreters Ruby Python etc and even graphical applications using an X server at the host side br The architecture was redesigned in WSL with a Linux kernel running in a lightweight virtual machine environment br br br wsl exe br The wsl exe command is used to manage distributions in the Windows Subsystem for Linux on the command line It can list available distributions set a default distribution and uninstall distributions The command can also be used to run Linux binaries from the Windows Command Prompt or Windows PowerShell wsl exe replaces lxrun exe which is deprecated as of Windows and later br br br WSLg br Windows Subsystem for Linux GUI WSLg is built with the purpose of enabling support for running Linux GUI applications X and Wayland on Windows in a fully integrated desktop experience WSLg was officially released at the Microsoft Build conference and is included in Windows Insider build or later However with the introduction of Windows WSLg is finally shipping with a production build of Windows bringing support for both graphics and audio in WSL apps FreeRDP is used to encode all communications going from the Remote Desktop Protocol RDP Server in Weston to the RDP Client msrdc on Windows according to the RDP protocol specifications br Prerequisites for running WSLg include br br Windows or Windows Insider Preview builds br A system with virtual GPU vGPU enabled for WSL is recommended as it will allow you to benefit from hardware accelerated OpenGL rendering br br br Design br br br WSL br br LXSS Manager Service is the service in charge of interacting with the subsystem through the drivers lxss sys and lxcore sys and the way that Bash exe not to be confused with the Shells provided by the Linux distributions launches the Linux processes as well as handling the Linux system calls and the binary locks during their execution All Linux processes invoked by a particular user go into a Linux Instance usually the first invoked process is init Once all the applications are closed the instance is closed br WSL s design featured no hardware emulation virtualization unlike other projects such as coLinux and makes direct use of the host file system through VolFS and DrvFS and some parts of the hardware such as the network which guarantees interoperability Web servers for example can be accessed through the same interfaces and IP addresses configured on the host and shares the same restrictions on the use of ports that require administrative permissions or ports already occupied by other applications There are certain locations such as system folders and configurations whose access modification is restricted even when running as root with sudo from the shell An instance with elevated privileges must be launched in order to get sudo to give real root privileges and allow such access br WSL is not capable of running all Linux software such as bit binaries or those that require specific Linux kernel services not implemented in WSL Due to a lack of any real Linux kernel in WSL kernel modules such as device drivers cannot be run WSL however makes use of live virtualized Linux kernel instances It is possible to run some graphical GUI applications such as Mozilla Firefox by installing an X server within the Windows host environment such as VcXsrv or Xming although not without caveats such as the lack of audio support though this can be remedied by installing PulseAudio in Windows in a similar manner to X or hardware acceleration resulting in poor graphics performance Support for OpenCL and CUDA is also not being implemented currently although planned for future releases Microsoft stated WSL was designed for the development of applications and not for desktop computers or production servers recommending the use of virtual machines Hyper V Kubernetes and Azure for those purposes br In benchmarks WSL s performance is often near native Linux Ubuntu Debian Intel Clear Linux or other Linux distributions I O is in some tests a bottleneck for WSL The redesigned WSL backend is claimed by Microsoft to offer twenty fold increases in speed on certain operations compared to that of WSL In June a benchmark with tests with an AMD Threadripper x shows good performance with WSL H with of the performance of native Ubuntu LTS This is an improvement over WSL which has only of the performance of native Ubuntu in this comparison WSL improves I O performance providing a near native level br A comparison of tests with Intel i K in May shows nearly the same relative performance In December a benchmark with tests with an AMD Ryzen X shows good performance with WSL H with of the performance of native LTS This is an improvement over WSL which has only in this comparison br br br WSL br br Version introduces changes in the architecture and programming schedule Microsoft has opted for virtualization through a highly optimized subset of Hyper V features in order to run the kernel and distributions based upon the kernel promising performance equivalent to WSL For backward compatibility developers do not need to change anything in their published distributions WSL settings can be tweaked by the WSL global configuration contained in an INI file named wslconfig in the User Profile folder br The distribution installation resides inside an ext formatted filesystem inside a virtual disk and the host file system is transparently accessible through the P protocol similarly to other virtual machine technologies like QEMU For the users Microsoft promised up to times the read write performance of WSL From Windows an IFS network redirector is provided for Linux guest file access using the UNC path prefix of wsl br WSL requires Windows or Windows version or higher with Build or higher for x systems and Version or higher with Build or higher for ARM systems br WSL on Windows retains of the performance of native Ubuntu LTS br WSL does not support IPv connections whereas WSL does IPv support in WSL requires Windows or newer br br br See also br br Azure Sphere br FreeBSD OS compatibility layers br SmartOS Virtualization br Windows Terminal br Xenix br br br br br br Further reading br Barnes Hayden Pro Windows Subsystem for Linux WSL Powerful Tools and Practices for Cross Platform Development and Collaboration Apress ISBN br Leeks Stuart Windows Subsystem for Linux WSL Tips Tricks and Techniques Maximise productivity of your Windows development machine with custom workflows and configurations Packt Publishing ISBN br Singh Prateek Learn Windows Subsystem for Linux A Practical Guide for Developers and IT Professionals Apress ISBN br br br External links br br WSL on Microsoft Learn br WSL on GitHub br WSL Linux Kernel on GitHub br Brown Pete July Fun with the Windows Subsystem for Linux Windows Developer Blog Microsoft 