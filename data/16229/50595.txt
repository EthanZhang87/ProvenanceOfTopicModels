title: Flash memory
id: 50595
Flash memory is an electronic non volatile computer memory storage medium that can be electrically erased and reprogrammed The two main types of flash memory NOR flash and NAND flash are named for the NOR and NAND logic gates Both use the same cell design consisting of floating gate MOSFETs They differ at the circuit level depending on whether the state of the bit line or word lines is pulled high or low in NAND flash the relationship between the bit line and the word lines resembles a NAND gate in NOR flash it resembles a NOR gate br Flash memory a type of floating gate memory was invented in Toshiba in and is based on EEPROM technology Toshiba began marketing flash memory in EPROMs had to be erased completely before they could be rewritten NAND flash memory however may be erased written and read in blocks or pages which generally are much smaller than the entire device NOR flash memory allows a single machine word to be written to an erased location or read independently A flash memory device typically consists of one or more flash memory chips each holding many flash memory cells along with a separate flash memory controller chip br The NAND type is found mainly in memory cards USB flash drives solid state drives those produced since feature phones smartphones and similar products for general storage and transfer of data NAND or NOR flash memory is also often used to store configuration data in digital products a task previously made possible by EEPROM or battery powered static RAM A key disadvantage of flash memory is that it can endure only a relatively small number of write cycles in a specific block br NOR flash is known for its direct random access capabilities making it apt for executing code directly Its architecture allows for individual byte access facilitating faster read speeds compared to NAND flash NAND flash memory operates with a different architecture relying on a serial access approach This makes NAND suitable for high density data storage but less efficient for random access tasks NAND flash is often employed in scenarios where cost effective high capacity storage is crucial such as in USB drives memory cards and solid state drives SSDs br The primary differentiator lies in their use cases and internal structures NOR flash is optimal for applications requiring quick access to individual bytes like in embedded systems for program execution NAND flash on the other hand shines in scenarios demanding cost effective high capacity storage with sequential data access br Flash memory is used in computers PDAs digital audio players digital cameras mobile phones synthesizers video games scientific instrumentation industrial robotics and medical electronics Flash memory has a fast read access time but it is not as fast as static RAM or ROM In portable devices it is preferred to use flash memory because of its mechanical shock resistance since mechanical drives are more prone to mechanical damage br Because erase cycles are slow the large block sizes used in flash memory erasing give it a significant speed advantage over non flash EEPROM when writing large amounts of data As of flash memory costs greatly less than byte programmable EEPROM and had become the dominant memory type wherever a system required a significant amount of non volatile solid state storage EEPROMs however are still used in applications that require only small amounts of storage as in serial presence detect br Flash memory packages can use die stacking with through silicon vias and several dozen layers of D TLC NAND cells per die simultaneously to achieve capacities of up to tebibyte per package using stacked dies and an integrated flash controller as a separate die inside the package br br br History br br br Background br The origins of flash memory can be traced back to the development of the floating gate MOSFET FGMOS also known as the floating gate transistor The original MOSFET metal oxide semiconductor field effect transistor also known as the MOS transistor was invented by Egyptian engineer Mohamed M Atalla and Korean engineer Dawon Kahng at Bell Labs in Kahng went on to develop a variation the floating gate MOSFET with Taiwanese American engineer Simon Min Sze at Bell Labs in They proposed that it could be used as floating gate memory cells for storing a form of programmable read only memory PROM that is both non volatile and re programmable br Early types of floating gate memory included EPROM erasable PROM and EEPROM electrically erasable PROM in the s However early floating gate memory required engineers to build a memory cell for each bit of data which proved to be cumbersome slow and expensive restricting floating gate memory to niche applications in the s such as military equipment and the earliest experimental mobile phones br br br Invention and commercialization br Fujio Masuoka while working for Toshiba proposed a new type of floating gate memory that allowed entire sections of memory to be erased quickly and easily by applying a voltage to a single wire connected to a group of cells This led to Masuoka s invention of flash memory at Toshiba in According to Toshiba the name flash was suggested by Masuoka s colleague Sh ji Ariizumi because the erasure process of the memory contents reminded him of the flash of a camera Masuoka and colleagues presented the invention of NOR flash in and then NAND flash at the IEEE International Electron Devices Meeting IEDM held in San Francisco br Toshiba commercially launched NAND flash memory in Intel Corporation introduced the first commercial NOR type flash chip in NOR based flash has long erase and write times but provides full address and data buses allowing random access to any memory location This makes it a suitable replacement for older read only memory ROM chips which are used to store program code that rarely needs to be updated such as a computer s BIOS or the firmware of set top boxes Its endurance may be from as little as erase cycles for an on chip flash memory to a more typical or erase cycles up to erase cycles NOR based flash was the basis of early flash based removable media CompactFlash was originally based on it though later cards moved to less expensive NAND flash br NAND flash has reduced erase and write times and requires less chip area per cell thus allowing greater storage density and lower cost per bit than NOR flash However the I O interface of NAND flash does not provide a random access external address bus Rather data must be read on a block wise basis with typical block sizes of hundreds to thousands of bits This makes NAND flash unsuitable as a drop in replacement for program ROM since most microprocessors and microcontrollers require byte level random access In this regard NAND flash is similar to other secondary data storage devices such as hard disks and optical media and is thus highly suitable for use in mass storage devices such as memory cards and solid state drives SSD For example SSDs store data using multiple NAND flash memory chips br The first NAND based removable memory card format was SmartMedia released in Many others followed including MultiMediaCard Secure Digital Memory Stick and xD Picture Card br br br Later developments br A new generation of memory card formats including RS MMC miniSD and microSD feature extremely small form factors For example the microSD card has an area of just over cm with a thickness of less than mm br NAND flash has achieved significant levels of memory density as a result of several major technologies that were commercialized during the late s to early s br NOR flash was the most common type of Flash memory sold until when NAND flash overtook NOR flash in sales br Multi level cell MLC technology stores more than one bit in each memory cell NEC demonstrated multi level cell MLC technology in with an Mb flash memory chip storing bits per cell STMicroelectronics also demonstrated MLC in with a MB NOR flash memory chip In Toshiba and SanDisk introduced NAND flash chips with QLC technology storing bits per cell and holding a capacity of Gbit Samsung Electronics introduced triple level cell TLC technology storing bits per cell and began mass producing NAND chips with TLC technology in br br br Charge trap flash br br Charge trap flash CTF technology replaces the polysilicon floating gate which is sandwiched between a blocking gate oxide above and a tunneling oxide below it with an electrically insulating silicon nitride layer the silicon nitride layer traps electrons In theory CTF is less prone to electron leakage providing improved data retention br Because CTF replaces the polysilicon with an electrically insulating nitride it allows for smaller cells and higher endurance lower degradation or wear However electrons can become trapped and accumulate in the nitride leading to degradation Leakage is exacerbated at high temperatures since electrons become more excited with increasing temperatures CTF technology however still uses a tunneling oxide and blocking layer which are the weak points of the technology since they can still be damaged in the usual ways the tunnel oxide can be degraded due to extremely high electric fields and the blocking layer due to Anode Hot Hole Injection AHHI br Degradation or wear of the oxides is the reason why flash memory has limited endurance and data retention goes down the potential for data loss increases with increasing degradation since the oxides lose their electrically insulating characteristics as they degrade The oxides must insulate against electrons to prevent them from leaking which would cause data loss br In NEC researchers including N Kodama K Oyama and Hiroki Shirai described a type of flash memory with a charge trap method In Boaz Eitan of Saifun Semiconductors later acquired by Spansion patented a flash memory technology named NROM that took advantage of a charge trapping layer to replace the conventional floating gate used in conventional flash memory designs In an Advanced Micro Devices AMD research team led by Richard M Fastow Egyptian engineer Khaled Z Ahmed and Jordanian engineer Sameer Haddad who later joined Spansion demonstrated a charge trapping mechanism for NOR flash memory cells CTF was later commercialized by AMD and Fujitsu in D V NAND vertical NAND technology stacks NAND flash memory cells vertically within a chip using D charge trap flash CTP technology D V NAND technology was first announced by Toshiba in and the first device with layers was first commercialized by Samsung Electronics in br br br D integrated circuit technology br D integrated circuit D IC technology stacks integrated circuit IC chips vertically into a single D IC chip package Toshiba introduced D IC technology to NAND flash memory in April when they debuted a GB eMMC compliant product number THGAM G D DBAI often abbreviated THGAM on consumer websites embedded NAND flash memory chip which was manufactured with eight stacked GB NAND flash chips In September Hynix Semiconductor now SK Hynix introduced layer D IC technology with a GB flash memory chip that was manufactured with stacked NAND flash chips using a wafer bonding process Toshiba also used an eight layer D IC for their GB THGBM flash chip in In Toshiba used a layer D IC for their GB THGBM flash chip which was manufactured with stacked GB chips In the s D ICs came into widespread commercial use for NAND flash memory in mobile devices br In Micron and Intel introduced a technology known as CMOS Under the Array CMOS Under Array CUA Core over Periphery COP Periphery Under Cell PUA or Xtacking in which the control circuitry for the flash memory is placed under or above the flash memory cell array This has allowed for an increase in the number of planes or sections a flash memory chip has increasing from planes to without increasing the area dedicated to the control or periphery circuitry This increases the number of IO operations per flash chip or die but it also introduces challenges when building capacitors for charge pumps used to write to the flash memory Some flash dies have as many as planes br As of August microSD cards with a capacity up to GB billion bytes are available The same year Samsung combined D IC chip stacking with its D V NAND and TLC technologies to manufacture its GB KLUFG R EM flash memory chip with eight stacked layer V NAND chips In Samsung produced a GB flash chip with eight stacked layer V NAND chips and with QLC technology br br br Principles of operation br br Flash memory stores information in an array of memory cells made from floating gate transistors In single level cell SLC devices each cell stores only one bit of information Multi level cell MLC devices including triple level cell TLC devices can store more than one bit per cell br The floating gate may be conductive typically polysilicon in most kinds of flash memory or non conductive as in SONOS flash memory br br br Floating gate MOSFET br br In flash memory each memory cell resembles a standard metal oxide semiconductor field effect transistor MOSFET except that the transistor has two gates instead of one The cells can be seen as an electrical switch in which current flows between two terminals source and drain and is controlled by a floating gate FG and a control gate CG The CG is similar to the gate in other MOS transistors but below this there is the FG insulated all around by an oxide layer The FG is interposed between the CG and the MOSFET channel Because the FG is electrically isolated by its insulating layer electrons placed on it are trapped When the FG is charged with electrons this charge screens the electric field from the CG thus increasing the threshold voltage VT of the cell This means that the VT of the cell can be changed between the uncharged FG threshold voltage VT and the higher charged FG threshold voltage VT by changing the FG charge In order to read a value from the cell an intermediate voltage VI between VT and VT is applied to the CG If the channel conducts at VI the FG must be uncharged if it were charged there would not be conduction because VI is less than VT If the channel does not conduct at the VI it indicates that the FG is charged The binary value of the cell is sensed by determining whether there is current flowing through the transistor when VI is asserted on the CG In a multi level cell device which stores more than one bit per cell the amount of current flow is sensed rather than simply its presence or absence in order to determine more precisely the level of charge on the FG br Floating gate MOSFETs are so named because there is an electrically insulating tunnel oxide layer between the floating gate and the silicon so the gate floats above the silicon The oxide keeps the electrons confined to the floating gate Degradation or wear and the limited endurance of floating gate Flash memory occurs due to the extremely high electric field million volts per centimeter experienced by the oxide Such high voltage densities can break atomic bonds over time in the relatively thin oxide gradually degrading its electrically insulating properties and allowing electrons to be trapped in and pass through freely leak from the floating gate into the oxide increasing the likelihood of data loss since the electrons the quantity of which is used to represent different charge levels each assigned to a different combination of bits in MLC Flash are normally in the floating gate This is why data retention goes down and the risk of data loss increases with increasing degradation The silicon oxide in a cell degrades with every erase operation The degradation increases the amount of negative charge in the cell over time due to trapped electrons in the oxide and negates some of the control gate voltage this over time also makes erasing the cell slower so to maintain the performance and reliability of the NAND chip the cell must be retired from use Endurance also decreases with the number of bits in a cell With more bits in a cell the number of possible states each represented by a different voltage level in a cell increases and is more sensitive to the voltages used for programming Voltages may be adjusted to compensate for degradation of the silicon oxide and as the number of bits increases the number of possible states also increases and thus the cell is less tolerant of adjustments to programming voltages because there is less space between the voltage levels that define each state in a cell br br br Fowler Nordheim tunneling br br The process of moving electrons from the control gate and into the floating gate is called Fowler Nordheim tunneling and it fundamentally changes the characteristics of the cell by increasing the MOSFET s threshold voltage This in turn changes the drain source current that flows through the transistor for a given gate voltage which is ultimately used to encode a binary value The Fowler Nordheim tunneling effect is reversible so electrons can be added to or removed from the floating gate processes traditionally known as writing and erasing br br br Internal charge pumps br Despite the need for relatively high programming and erasing voltages virtually all flash chips today require only a single supply voltage and produce the high voltages that are required using on chip charge pumps br Over half the energy used by a V NAND flash chip is lost in the charge pump itself Since boost converters are inherently more efficient than charge pumps researchers developing low power SSDs have proposed returning to the dual Vcc Vpp supply voltages used on all early flash chips driving the high Vpp voltage for all flash chips in an SSD with a single shared external boost converter br In spacecraft and other high radiation environments the on chip charge pump is the first part of the flash chip to fail although flash memories will continue to work in read only mode at much higher radiation levels br br br NOR flash br br In NOR flash each cell has one end connected directly to ground and the other end connected directly to a bit line This arrangement is called NOR flash because it acts like a NOR gate when one of the word lines connected to the cell s CG is brought high the corresponding storage transistor acts to pull the output bit line low NOR flash continues to be the technology of choice for embedded applications requiring a discrete non volatile memory device The low read latencies characteristic of NOR devices allow for both direct code execution and data storage in a single memory product br br br Programming br br A single level NOR flash cell in its default state is logically equivalent to a binary value because current will flow through the channel under application of an appropriate voltage to the control gate so that the bitline voltage is pulled down A NOR flash cell can be programmed or set to a binary value by the following procedure br br an elevated on voltage typically V is applied to the CG br the channel is now turned on so electrons can flow from the source to the drain assuming an NMOS transistor br the source drain current is sufficiently high to cause some high energy electrons to jump through the insulating layer onto the FG via a process called hot electron injection br br br Erasing br To erase a NOR flash cell resetting it to the state a large voltage of the opposite polarity is applied between the CG and source terminal pulling the electrons off the FG through Fowler Nordheim tunneling FN tunneling This is known as Negative gate source source erase Newer NOR memories can erase using negative gate channel erase which biases the wordline on a NOR memory cell block and the P well of the memory cell block to allow FN tunneling to be carried out erasing the cell block Older memories used source erase in which a high voltage was applied to the source and then electrons from the FG were moved to the source Modern NOR flash memory chips are divided into erase segments often called blocks or sectors The erase operation can be performed only on a block wise basis all the cells in an erase segment must be erased together Programming of NOR cells however generally can be performed one byte or word at a time br br br NAND flash br NAND flash also uses floating gate transistors but they are connected in a way that resembles a NAND gate several transistors are connected in series and the bit line is pulled low only if all the word lines are pulled high above the transistors VT These groups are then connected via some additional transistors to a NOR style bit line array in the same way that single transistors are linked in NOR flash br Compared to NOR flash replacing single transistors with serial linked groups adds an extra level of addressing Whereas NOR flash might address memory by page then word NAND flash might address it by page word and bit Bit level addressing suits bit serial applications such as hard disk emulation which access only one bit at a time Execute in place applications on the other hand require every bit in a word to be accessed simultaneously This requires word level addressing In any case both bit and word addressing modes are possible with either NOR or NAND flash br To read data first the desired group is selected in the same way that a single transistor is selected from a NOR array Next most of the word lines are pulled up above VT while one of them is pulled up to VI The series group will conduct and pull the bit line low if the selected bit has not been programmed br Despite the additional transistors the reduction in ground wires and bit lines allows a denser layout and greater storage capacity per chip The ground wires and bit lines are actually much wider than the lines in the diagrams In addition NAND flash is typically permitted to contain a certain number of faults NOR flash as is used for a BIOS ROM is expected to be fault free Manufacturers try to maximize the amount of usable storage by shrinking the size of the transistors or cells however the industry can avoid this and achieve higher storage densities per die by using D NAND which stacks cells on top of each other br NAND flash cells are read by analysing their response to various voltages br br br Writing and erasing br NAND flash uses tunnel injection for writing and tunnel release for erasing NAND flash memory forms the core of the removable USB storage devices known as USB flash drives as well as most memory card formats and solid state drives available today br The hierarchical structure of NAND flash starts at a cell level which establishes strings then pages blocks planes and ultimately a die A string is a series of connected NAND cells in which the source of one cell is connected to the drain of the next one Depending on the NAND technology a string typically consists of to NAND cells Strings are organised into pages which are then organised into blocks in which each string is connected to a separate line called a bitline All cells with the same position in the string are connected through the control gates by a wordline A plane contains a certain number of blocks that are connected through the same bitline A flash die consists of one or more planes and the peripheral circuitry that is needed to perform all the read write and erase operations br The architecture of NAND flash means that data can be read and programmed written in pages typically between KiB and KiB in size but can only be erased at the level of entire blocks consisting of multiple pages When a block is erased all the cells are logically set to Data can only be programmed in one pass to a page in a block that was erased Any cells that have been set to by programming can only be reset to by erasing the entire block This means that before new data can be programmed into a page that already contains data the current contents of the page plus the new data must be copied to a new erased page If a suitable erased page is available the data can be written to it immediately If no erased page is available a block must be erased before copying the data to a page in that block The old page is then marked as invalid and is available for erasing and reuse br br br Vertical NAND br br Vertical NAND V NAND or D NAND memory stacks memory cells vertically and uses a charge trap flash architecture The vertical layers allow larger areal bit densities without requiring smaller individual cells It is also sold under the trademark BiCS Flash which is a trademark of Kioxia Corporation formerly Toshiba Memory Corporation D NAND was first announced by Toshiba in V NAND was first commercially manufactured by Samsung Electronics in br br br Structure br V NAND uses a charge trap flash geometry which was commercially introduced in by AMD and Fujitsu that stores charge on an embedded silicon nitride film Such a film is more robust against point defects and can be made thicker to hold larger numbers of electrons V NAND wraps a planar charge trap cell into a cylindrical form As of D NAND flash memories by Micron and Intel instead use floating gates however Micron layer and above D NAND memories use a conventional charge trap structure due to the dissolution of the partnership between Micron and Intel Charge trap D NAND flash is thinner than floating gate D NAND In floating gate D NAND the memory cells are completely separated from one another whereas in charge trap D NAND vertical groups of memory cells share the same silicon nitride material br An individual memory cell is made up of one planar polysilicon layer containing a hole filled by multiple concentric vertical cylinders The hole s polysilicon surface acts as the gate electrode The outermost silicon dioxide cylinder acts as the gate dielectric enclosing a silicon nitride cylinder that stores charge in turn enclosing a silicon dioxide cylinder as the tunnel dielectric that surrounds a central rod of conducting polysilicon which acts as the conducting channel br Memory cells in different vertical layers do not interfere with each other as the charges cannot move vertically through the silicon nitride storage medium and the electric fields associated with the gates are closely confined within each layer The vertical collection is electrically identical to the serial linked groups in which conventional NAND flash memory is configured There is also string stacking which builds several D NAND memory arrays or plugs separately but stacked together to create a product with a higher number of D NAND layers on a single die Often two or arrays are stacked The misalignment between plugs is in the order of to nm br br br Construction br Growth of a group of V NAND cells begins with an alternating stack of conducting doped polysilicon layers and insulating silicon dioxide layers br The next step is to form a cylindrical hole through these layers In practice a Gbit V NAND chip with layers of memory cells requires about billion such holes Next the hole s inner surface receives multiple coatings first silicon dioxide then silicon nitride then a second layer of silicon dioxide Finally the hole is filled with conducting doped polysilicon br br br Performance br As of V NAND flash architecture allows read and write operations twice as fast as conventional NAND and can last up to times as long while consuming percent less power They offer comparable physical bit density using nm lithography but may be able to increase bit density by up to two orders of magnitude given V NAND s use of up to several hundred layers As of V NAND chips with layers are under development by Samsung br br br Cost br br The wafer cost of a D NAND is comparable with scaled down nm or less planar NAND flash However with planar NAND scaling stopping at nm the cost per bit reduction can continue by D NAND starting with layers However due to the non vertical sidewall of the hole etched through the layers even a slight deviation leads to a minimum bit cost i e minimum equivalent design rule or maximum density for a given number of layers this minimum bit cost layer number decreases for smaller hole diameter br br br Limitations br br br Block erasure br One limitation of flash memory is that it can be erased only a block at a time This generally sets all bits in the block to Starting with a freshly erased block any location within that block can be programmed However once a bit has been set to only by erasing the entire block can it be changed back to In other words flash memory specifically NOR flash offers random access read and programming operations but does not offer arbitrary random access rewrite or erase operations A location can however be rewritten as long as the new value s bits are a superset of the over written values For example a nibble value may be erased to then written as Successive writes to that nibble can change it to then and finally Essentially erasure sets all bits to and programming can only clear bits to br Some file systems designed for flash devices make use of this rewrite capability for example Yaffs to represent sector metadata br Other flash file systems such as YAFFS never make use of this rewrite capability they do a lot of extra work to meet a write once rule br Although data structures in flash memory cannot be updated in completely general ways this allows members to be removed by marking them as invalid This technique may need to be modified for multi level cell devices where one memory cell holds more than one bit br Common flash devices such as USB flash drives and memory cards provide only a block level interface or flash translation layer FTL which writes to a different cell each time to wear level the device This prevents incremental writing within a block however it does help the device from being prematurely worn out by intensive write patterns br br br Data retention br br Data stored on flash cells is steadily lost due to electron detrapping The rate of loss increases exponentially as the absolute temperature increases For example For a nm NOR flash at hours the threshold voltage Vt loss at deg Celsius is about half that at deg Celsius br br br Memory wear br Another limitation is that flash memory has a finite number of program erase cycles typically written as P E cycles Micron Technology and Sun Microsystems announced an SLC NAND flash memory chip rated for P E cycles on December br The guaranteed cycle count may apply only to block zero as is the case with TSOP NAND devices or to all blocks as in NOR This effect is mitigated in some chip firmware or file system drivers by counting the writes and dynamically remapping blocks in order to spread write operations between sectors this technique is called wear leveling Another approach is to perform write verification and remapping to spare sectors in case of write failure a technique called bad block management BBM For portable consumer devices these wear out management techniques typically extend the life of the flash memory beyond the life of the device itself and some data loss may be acceptable in these applications For high reliability data storage however it is not advisable to use flash memory that would have to go through a large number of programming cycles This limitation also exists for read only applications such as thin clients and routers which are programmed only once or at most a few times during their lifetimes due to read disturb see below br In December Taiwanese engineers from Macronix revealed their intention to announce at the IEEE International Electron Devices Meeting that they had figured out how to improve NAND flash storage read write cycles from to million cycles using a self healing process that used a flash chip with onboard heaters that could anneal small groups of memory cells The built in thermal annealing was to replace the usual erase cycle with a local high temperature process that not only erased the stored charge but also repaired the electron induced stress in the chip giving write cycles of at least million The result was to be a chip that could be erased and rewritten over and over even when it should theoretically break down As promising as Macronix s breakthrough might have been for the mobile industry however there were no plans for a commercial product featuring this capability to be released any time in the near future br br br Read disturb br The method used to read NAND flash memory can cause nearby cells in the same memory block to change over time become programmed This is known as read disturb The threshold number of reads is generally in the hundreds of thousands of reads between intervening erase operations If reading continually from one cell that cell will not fail but rather one of the surrounding cells will on a subsequent read To avoid the read disturb problem the flash controller will typically count the total number of reads to a block since the last erase When the count exceeds a target limit the affected block is copied over to a new block erased then released to the block pool The original block is as good as new after the erase If the flash controller does not intervene in time however a read disturb error will occur with possible data loss if the errors are too numerous to correct with an error correcting code br br br X ray effects br Most flash ICs come in ball grid array BGA packages and even the ones that do not are often mounted on a PCB next to other BGA packages After PCB Assembly boards with BGA packages are often X rayed to see if the balls are making proper connections to the proper pad or if the BGA needs rework These X rays can erase programmed bits in a flash chip convert programmed bits into erased bits Erased bits bits are not affected by X rays br Some manufacturers are now making X ray proof SD and USB memory devices br br br Low level access br The low level interface to flash memory chips differs from those of other memory types such as DRAM ROM and EEPROM which support bit alterability both zero to one and one to zero and random access via externally accessible address buses br NOR memory has an external address bus for reading and programming For NOR memory reading and programming are random access and unlocking and erasing are block wise For NAND memory reading and programming are page wise and unlocking and erasing are block wise br br br NOR memories br br Reading from NOR flash is similar to reading from random access memory provided the address and data bus are mapped correctly Because of this most microprocessors can use NOR flash memory as execute in place XIP memory meaning that programs stored in NOR flash can be executed directly from the NOR flash without needing to be copied into RAM first NOR flash may be programmed in a random access manner similar to reading Programming changes bits from a logical one to a zero Bits that are already zero are left unchanged Erasure must happen a block at a time and resets all the bits in the erased block back to one Typical block sizes are or KiB br Bad block management is a relatively new feature in NOR chips In older NOR devices not supporting bad block management the software or device driver controlling the memory chip must correct for blocks that wear out or the device will cease to work reliably br The specific commands used to lock unlock program or erase NOR memories differ for each manufacturer To avoid needing unique driver software for every device made special Common Flash Memory Interface CFI commands allow the device to identify itself and its critical operating parameters br Besides its use as random access ROM NOR flash can also be used as a storage device by taking advantage of random access programming Some devices offer read while write functionality so that code continues to execute even while a program or erase operation is occurring in the background For sequential data writes NOR flash chips typically have slow write speeds compared with NAND flash br Typical NOR flash does not need an error correcting code br br br NAND memories br NAND flash architecture was introduced by Toshiba in These memories are accessed much like block devices such as hard disks Each block consists of a number of pages The pages are typically or bytes in size Associated with each page are a few bytes typically of the data size that can be used for storage of an error correcting code ECC checksum br Typical block sizes include br br pages of bytes each for a block size effective of KiB br pages of bytes each for a block size of KiB br pages of bytes each for a block size of KiB br pages of bytes each for a block size of KiB br Modern NAND flash may have erase block size between MiB to MiB While reading and programming is performed on a page basis erasure can only be performed on a block basis br NAND devices also require bad block management by the device driver software or by a separate controller chip Some SD cards for example include controller circuitry to perform bad block management and wear leveling When a logical block is accessed by high level software it is mapped to a physical block by the device driver or controller A number of blocks on the flash chip may be set aside for storing mapping tables to deal with bad blocks or the system may simply check each block at power up to create a bad block map in RAM The overall memory capacity gradually shrinks as more blocks are marked as bad br NAND relies on ECC to compensate for bits that may spontaneously fail during normal device operation A typical ECC will correct a one bit error in each bits bytes using bits of ECC or a one bit error in each bits bytes using bits of ECC If the ECC cannot correct the error during read it may still detect the error When doing erase or program operations the device can detect blocks that fail to program or erase and mark them bad The data is then written to a different good block and the bad block map is updated br Hamming codes are the most commonly used ECC for SLC NAND flash Reed Solomon codes and BCH codes Bose Chaudhuri Hocquenghem codes are commonly used ECC for MLC NAND flash Some MLC NAND flash chips internally generate the appropriate BCH error correction codes br Most NAND devices are shipped from the factory with some bad blocks These are typically marked according to a specified bad block marking strategy By allowing some bad blocks manufacturers achieve far higher yields than would be possible if all blocks had to be verified to be good This significantly reduces NAND flash costs and only slightly decreases the storage capacity of the parts br When executing software from NAND memories virtual memory strategies are often used memory contents must first be paged or copied into memory mapped RAM and executed there leading to the common combination of NAND RAM A memory management unit MMU in the system is helpful but this can also be accomplished with overlays For this reason some systems will use a combination of NOR and NAND memories where a smaller NOR memory is used as software ROM and a larger NAND memory is partitioned with a file system for use as a non volatile data storage area br NAND sacrifices the random access and execute in place advantages of NOR NAND is best suited to systems requiring high capacity data storage It offers higher densities larger capacities and lower cost It has faster erases sequential writes and sequential reads br br br Standardization br A group called the Open NAND Flash Interface Working Group ONFI has developed a standardized low level interface for NAND flash chips This allows interoperability between conforming NAND devices from different vendors The ONFI specification version was released on December It specifies br br A standard physical interface pinout for NAND flash in TSOP WSOP LGA and BGA packages br A standard command set for reading writing and erasing NAND flash chips br A mechanism for self identification comparable to the serial presence detection feature of SDRAM memory modules br The ONFI group is supported by major NAND flash manufacturers including Hynix Intel Micron Technology and Numonyx as well as by major manufacturers of devices incorporating NAND flash chips br Two major flash device manufacturers Toshiba and Samsung have chosen to use an interface of their own design known as Toggle Mode and now Toggle This interface isn t pin to pin compatible with the ONFI specification The result is that a product designed for one vendor s devices may not be able to use another vendor s devices br A group of vendors including Intel Dell and Microsoft formed a Non Volatile Memory Host Controller Interface NVMHCI Working Group The goal of the group is to provide standard software and hardware programming interfaces for nonvolatile memory subsystems including the flash cache device connected to the PCI Express bus br br br Distinction between NOR and NAND flash br NOR and NAND flash differ in two important ways br br The connections of the individual memory cells are different br The interface provided for reading and writing the memory is different NOR allows random access as it can be either byte addressable or word addressable with words being for example bits long while NAND allows only page access br NOR and NAND flash get their names from the structure of the interconnections between memory cells In NOR flash cells are connected in parallel to the bit lines allowing cells to be read and programmed individually The parallel connection of cells resembles the parallel connection of transistors in a CMOS NOR gate In NAND flash cells are connected in series resembling a CMOS NAND gate The series connections consume less space than parallel ones reducing the cost of NAND flash It does not by itself prevent NAND cells from being read and programmed individually br Each NOR flash cell is larger than a NAND flash cell F vs F even when using exactly the same semiconductor device fabrication and so each transistor contact etc is exactly the same size because NOR flash cells require a separate metal contact for each cell br Because of the series connection and removal of wordline contacts a large grid of NAND flash memory cells will occupy perhaps only of the area of equivalent NOR cells assuming the same CMOS process resolution for example nm nm or nm NAND flash s designers realized that the area of a NAND chip and thus the cost could be further reduced by removing the external address and data bus circuitry Instead external devices could communicate with NAND flash via sequential accessed command and data registers which would internally retrieve and output the necessary data This design choice made random access of NAND flash memory impossible but the goal of NAND flash was to replace mechanical hard disks not to replace ROMs br The first GSM phones and many feature phones had NOR flash memory from which processor instructions could be executed directly in an execute in place architecture and allowed for short boot times With smartphones NAND flash memory was adopted as it has larger storage capacities and lower costs but causes longer boot times because instructions cannot be executed from it directly and must be copied to RAM memory first before execution br br br Write endurance br The write endurance of SLC floating gate NOR flash is typically equal to or greater than that of NAND flash while MLC NOR and NAND flash have similar endurance capabilities Examples of endurance cycle ratings listed in datasheets for NAND and NOR flash as well as in storage devices using flash memory are provided br br However by applying certain algorithms and design paradigms such as wear leveling and memory over provisioning the endurance of a storage system can be tuned to serve specific requirements br In order to compute the longevity of the NAND flash one must account for the size of the memory chip the type of memory e g SLC MLC TLC and use pattern Industrial NAND and server NAND are in demand due to their capacity longer endurance and reliability in sensitive environments br As the number of bits per cell increases performance and life of NAND flash may degrade increasing random read times to s for TLC NAND which is times the time required in SLC NAND and twice the time required in MLC NAND for random reads br br br Flash file systems br br Because of the particular characteristics of flash memory it is best used with either a controller to perform wear leveling and error correction or specifically designed flash file systems which spread writes over the media and deal with the long erase times of NOR flash blocks The basic concept behind flash file systems is the following when the flash store is to be updated the file system will write a new copy of the changed data to a fresh block remap the file pointers then erase the old block later when it has time br In practice flash file systems are used only for memory technology devices MTDs which are embedded flash memories that do not have a controller Removable flash memory cards SSDs eMMC eUFS chips and USB flash drives have built in controllers to perform wear leveling and error correction so use of a specific flash file system may not add benefit br br br Capacity br Multiple chips are often arrayed or die stacked to achieve higher capacities for use in consumer electronic devices such as multimedia players or GPSs The capacity scaling increase of flash chips used to follow Moore s law because they are manufactured with many of the same integrated circuits techniques and equipment Since the introduction of D NAND scaling is no longer necessarily associated with Moore s law since ever smaller transistors cells are no longer used br Consumer flash storage devices typically are advertised with usable sizes expressed as a small integer power of two etc and a conventional designation of megabytes MB or gigabytes GB e g MB GB This includes SSDs marketed as hard drive replacements in accordance with traditional hard drives which use decimal prefixes Thus an SSD marked as GB is at least bytes GB Most users will have slightly less capacity than this available for their files due to the space taken by file system metadata and because some operating systems report SSD capacity using binary prefixes which are somewhat larger than conventional prefixes br The flash memory chips inside them are sized in strict binary multiples but the actual total capacity of the chips is not usable at the drive interface br It is considerably larger than the advertised capacity in order to allow for distribution of writes wear leveling for sparing for error correction codes and for other metadata needed by the device s internal firmware br In Toshiba and SanDisk developed a NAND flash chip capable of storing GB of data using multi level cell MLC technology capable of storing two bits of data per cell In September Samsung Electronics announced that it had developed the world s first GB chip br In March Samsung announced flash hard drives with capacity of GB essentially the same order of magnitude as smaller laptop hard drives and in September Samsung announced an GB chip produced using a nm manufacturing process br In January SanDisk announced availability of their GB MicroSDHC and GB SDHC Plus cards br More recent flash drives as of have much greater capacities holding and GB br A joint development at Intel and Micron will allow the production of layer terabyte TB NAND flash sticks and TB standard sized SSDs The device includes packages of GB TLC dies using a floating gate cell design br Flash chips continue to be manufactured with capacities under or around MB e g for BIOS ROMs and embedded applications br In July Samsung announced the TB Samsung EVO which utilizes their Gbit layer TLC D V NAND In August Samsung announced a TB inch SAS SSD based on their Gbit layer TLC D V NAND Further Samsung expects to unveil SSDs with up to TB of storage by br br br Transfer rates br Flash memory devices are typically much faster at reading than writing Performance also depends on the quality of storage controllers which become more critical when devices are partially full Even when the only change to manufacturing is die shrink the absence of an appropriate controller can result in degraded speeds br br br Applications br br br Serial flash br br Serial flash is a small low power flash memory that provides only serial access to the data rather than addressing individual bytes the user reads or writes large contiguous groups of bytes in the address space serially Serial Peripheral Interface Bus SPI is a typical protocol for accessing the device br When incorporated into an embedded system serial flash requires fewer wires on the PCB than parallel flash memories since it transmits and receives data one bit at a time This may permit a reduction in board space power consumption and total system cost br There are several reasons why a serial device with fewer external pins than a parallel device can significantly reduce overall cost br br Many ASICs are pad limited meaning that the size of the die is constrained by the number of wire bond pads rather than the complexity and number of gates used for the device logic Eliminating bond pads thus permits a more compact integrated circuit on a smaller die this increases the number of dies that may be fabricated on a wafer and thus reduces the cost per die br Reducing the number of external pins also reduces assembly and packaging costs A serial device may be packaged in a smaller and simpler package than a parallel device br Smaller and lower pin count packages occupy less PCB area br Lower pin count devices simplify PCB routing br There are two major SPI flash types The first type is characterized by small pages and one or more internal SRAM page buffers allowing a complete page to be read to the buffer partially modified and then written back for example the Atmel AT DataFlash or the Micron Technology Page Erase NOR Flash The second type has larger sectors where the smallest sectors typically found in this type of SPI flash are kB but they can be as large as kB Since this type of SPI flash lacks an internal SRAM buffer the complete page must be read out and modified before being written back making it slow to manage However the second type is cheaper than the first and is therefore a good choice when the application is code shadowing br The two types are not easily exchangeable since they do not have the same pinout and the command sets are incompatible br Most FPGAs are based on SRAM configuration cells and require an external configuration device often a serial flash chip to reload the configuration bitstream every power cycle br br br Firmware storage br With the increasing speed of modern CPUs parallel flash devices are often much slower than the memory bus of the computer they are connected to Conversely modern SRAM offers access times below ns while DDR SDRAM offers access times below ns Because of this it is often desirable to shadow code stored in flash into RAM that is the code is copied from flash into RAM before execution so that the CPU may access it at full speed Device firmware may be stored in a serial flash chip and then copied into SDRAM or SRAM when the device is powered up Using an external serial flash device rather than on chip flash removes the need for significant process compromise a manufacturing process that is good for high speed logic is generally not good for flash and vice versa Once it is decided to read the firmware in as one big block it is common to add compression to allow a smaller flash chip to be used Since many devices use serial NOR flash to deprecate parallel NOR flash for firmware storage Typical applications for serial flash include storing firmware for hard drives Ethernet network interface adapters DSL modems etc br br br Flash memory as a replacement for hard drives br br One more recent application for flash memory is as a replacement for hard disks Flash memory does not have the mechanical limitations and latencies of hard drives so a solid state drive SSD is attractive when considering speed noise power consumption and reliability Flash drives are gaining traction as mobile device secondary storage devices they are also used as substitutes for hard drives in high performance desktop computers and some servers with RAID and SAN architectures br There remain some aspects of flash based SSDs that make them unattractive The cost per gigabyte of flash memory remains significantly higher than that of hard disks Also flash memory has a finite number of P E program erase cycles but this seems to be currently under control since warranties on flash based SSDs are approaching those of current hard drives In addition deleted files on SSDs can remain for an indefinite period of time before being overwritten by fresh data erasure or shred techniques or software that work well on magnetic hard disk drives have no effect on SSDs compromising security and forensic examination However due to the so called TRIM command employed by most solid state drives which marks the logical block addresses occupied by the deleted file as unused to enable garbage collection data recovery software is not able to restore files deleted from such br For relational databases or other systems that require ACID transactions even a modest amount of flash storage can offer vast speedups over arrays of disk drives br In May Samsung Electronics announced two flash memory based PCs the Q SSD and Q SSD were expected to become available in June both of which used GB SSDs and were at least initially available only in South Korea The Q SSD and Q SSD launch was delayed and finally was shipped in late August br The first flash memory based PC to become available was the Sony Vaio UX announced for pre order on June and began to be shipped in Japan on July with a Gb flash memory hard drive In late September Sony upgraded the flash memory in the Vaio UX to Gb br A solid state drive was offered as an option with the first MacBook Air introduced in and from onwards all models were shipped with an SSD Starting in late as part of Intel s Ultrabook initiative an increasing number of ultra thin laptops are being shipped with SSDs standard br There are also hybrid techniques such as hybrid drive and ReadyBoost that attempt to combine the advantages of both technologies using flash as a high speed non volatile cache for files on the disk that are often referenced but rarely modified such as application and operating system executable files br br br Flash memory as RAM br As of there are attempts to use flash memory as the main computer memory DRAM br br br Archival or long term storage br Floating gate transistors in the flash storage device hold charge which represents data This charge gradually leaks over time leading to an accumulation of logical errors also known as bit rot or bit fading br br br Data retention br It is unclear how long data on flash memory will persist under archival conditions i e benign temperature and humidity with infrequent access with or without prophylactic rewrite Datasheets of Atmel s flash based ATmega microcontrollers typically promise retention times of years at C F and years at C F br The retention span varies among types and models of flash storage When supplied with power and idle the charge of the transistors holding the data is routinely refreshed by the firmware of the flash storage The ability to retain data varies among flash storage devices due to differences in firmware data redundancy and error correction algorithms br An article from CMU in states Today s flash devices which do not require flash refresh have a typical retention age of year at room temperature And that retention time decreases exponentially with increasing temperature The phenomenon can be modeled by the Arrhenius equation br br br FPGA configuration br Some FPGAs are based on flash configuration cells that are used directly as programmable switches to connect internal elements together using the same kind of floating gate transistor as the flash data storage cells in data storage devices br br br Industry br br One source states that in the flash memory industry includes about US billion in production and sales Other sources put the flash memory market at a size of more than US billion in accounting for more than eight percent of the overall semiconductor market and more than percent of the total semiconductor memory market br In the market was estimated at billion It can take up to weeks to produce a flash memory chip br br br Manufacturers br br The following were the largest NAND flash memory manufacturers as of the second quarter of br br Samsung Electronics br Kioxia br Western Digital Corporation br SK Hynix br Micron Technology br Others Note SK Hynix acquired Intel s NAND business at the end of Kioxia spun out and got renamed of Toshiba in br Samsung remains the largest NAND flash memory manufacturer as of first quarter br br br Shipments br br In addition to individual flash memory chips flash memory is also embedded in microcontroller MCU chips and system on chip SoC devices Flash memory is embedded in ARM chips which have sold billion units worldwide as of and in programmable system on chip PSoC devices which have sold billion units as of This adds up to at least billion MCU and SoC chips with embedded flash memory in addition to the billion known individual flash chip sales as of totalling at least billion chips containing flash memory br br br Flash scalability br br Due to its relatively simple structure and high demand for higher capacity NAND flash memory is the most aggressively scaled technology among electronic devices The heavy competition among the top few manufacturers only adds to the aggressiveness in shrinking the floating gate MOSFET design rule or process technology node While the expected shrink timeline is a factor of two every three years per original version of Moore s law this has recently been accelerated in the case of NAND flash to a factor of two every two years br br As the MOSFET feature size of flash memory cells reaches the nm minimum limit further flash density increases will be driven by TLC bits cell combined with vertical stacking of NAND memory planes The decrease in endurance and increase in uncorrectable bit error rates that accompany feature size shrinking can be compensated by improved error correction mechanisms Even with these advances it may be impossible to economically scale flash to smaller and smaller dimensions as the number of electron holding capacity reduces Many promising new technologies such as FeRAM MRAM PMC PCM ReRAM and others are under investigation and development as possible more scalable replacements for flash br br br Timeline br br br See also br eMMC br Flash memory controller br Intel hex file format br List of flash file systems br List of flash memory controller manufacturers br microSDXC up to TB and the successor format Secure Digital Ultra Capacity SDUC supporting cards up to TiB br NOR flash replacement br Open NAND Flash Interface Working Group br Read mostly memory RMM br Universal Flash Storage br USB flash drive security br Write amplification br br br Explanatory notes br br br br br br External links br br Semiconductor Characterization System has diverse functions Archived October at the Wayback Machine br Understanding and selecting higher performance NAND architectures Archived October at the Wayback Machine br How flash storage works presentation by David Woodhouse from Intel br Flash endurance testing br NAND Flash Data Recovery Cookbook br Type of Flash Memory by OpenWrt