title: HHVM
id: 42020002
HipHop Virtual Machine HHVM is an open source virtual machine based on just in time JIT compilation that serves as an execution engine for the Hack programming language By using the principle of JIT compilation Hack code is first transformed into intermediate HipHop bytecode HHBC which is then dynamically translated into x machine code optimized and natively executed This contrasts with PHP s usual interpreted execution in which the Zend Engine transforms PHP source code into opcodes that serve as a form of bytecode and executes the opcodes directly on the Zend Engine s virtual CPU br HHVM is developed by Meta with the project s source code hosted on GitHub it is licensed under the terms of the PHP License and Zend License br br br Overview br HHVM was created as the successor to the HipHop for PHP HPHPc PHP execution engine which is a PHP to C transpiler also created by Facebook Based on the gained experience and aiming to solve issues introduced by HPHPc Meta decided in early to create a JIT based PHP virtual machine Issues associated with HPHPc included reaching a plateau for further performance improvements a fundamental inability to support all features of the PHP language and difficulties arising from specific time and resource consuming development and deployment processes In Q the production version of the facebook com website stopped using HPHPc and switched to HHVM br Following the JIT compilation principle HHVM first converts the executed code into an intermediate language the high level bytecode HHBC HHBC is a bytecode format created specifically for HHVM appropriate for consumption by both interpreters and just in time compilers Next HHVM dynamically just in time translates the HHBC into x machine code optimized through dynamic analysis of the translated bytecode Finally it executes the x machine code As a result HHVM has certain similarities to the virtual machines used by other programming languages including the Common Language Runtime CLR for the C language and Java virtual machine JVM for the Java language br HHVM brings many benefits in comparison with HPHPc HHVM uses the same execution engine when deployed in both production and development environments while supporting integration between the execution engine and the HPHPd debugger in both environment types as a result maintaining HPHPi HipHop interpreter separately as a development utility is no longer needed as it was the case with HPHPc HHVM also eliminates the lengthy builds required by HPHPc to run programs resulting in much simpler development and deployment processes than it was the case with HPHPc Finally versions of HHVM before have almost complete support for the entire PHP language as defined by the official implementation of PHP version including the support for the create function and eval constructs which was impossible with HPHPc br Together with HHVM Meta also released Hack a derivative of PHP that allows programmers to use both dynamic typing and static typing a concept also known as gradual typing and allows types to be specified for function arguments function return values and class properties However Hack does not provide complete backward compatibility since it removes several PHP features such as the goto statement and dynamic variable names br In September it was announced that version would be the last version of HHVM to officially support PHP and that HHVM will only support Hack going forward This was due to differences and incompatibilities in PHP HHVM released in February was the first version without support for PHP br br br Performance br As a process virtual machine that provides the execution environment HHVM has the ability to use live type information to produce more efficient native code leading to a higher web server throughput and lower latency In Q the execution of facebook com s source code on HHVM achieved performance parity with HPHPc and in December HPHPc was even surpassed by around br br br See also br br LLVM br Parrot virtual machine br Phalanger br br br Notes br br br br br br External links br Official website