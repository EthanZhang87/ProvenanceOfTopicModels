title: Apache Harmony
id: 1894247
Apache Harmony is a retired open source free Java implementation developed by the Apache Software Foundation It was announced in early May and on October the board of directors voted to make Apache Harmony a top level project The Harmony project achieved as of February completeness for J SE and for Java SE The Android operating system has historically been a major user of Harmony although since Android Nougat it increasingly relies on OpenJDK libraries br On October a vote was started by the project lead Tim Ellison whether to retire the project The outcome was to in favor and the project was retired on November br br br History br br br Initiation br The Harmony project was initially conceived as an effort to unite all developers of the free Java implementations Many developers expected that it would be the project above the GNU Apache and other communities GNU developers were invited into and participated during the initial preparatory planning Apache then decided not to use code from GNU Classpath because it wanted Harmony to be available under the Apache License v Apache developers would then write the needed classes from scratch and expect necessary large code donations from software companies Various misunderstandings at the start of the project and proposals from major companies like IBM to donate large amounts of existing code led some people in the free Java community to view the project as a corporate consortium than an Apache project br One major point of incompatibility between the GNU Classpath and Apache Harmony projects was their incompatible licenses Classpath s GNU General Public License with the linking exception versus Harmony s Apache License br br br Difficulties to obtain a TCK license from Sun br br On April the Apache Software Foundation sent an open letter to Sun Microsystems CEO Jonathan Schwartz regarding their inability to acquire an acceptable license for the Java SE Technology Compatibility Kit TCK a test kit needed by the project to demonstrate compatibility with the Java SE specification as needed by the Sun specification license for Java SE What makes the license unacceptable for ASF is the fact that it imposes rights restrictions through limits on the field of use available to users of Harmony not compliant with the Java Community Process rules br Sun answered on a company blog that it intended to create an open source implementation of the Java platform under GPL including the TCK but that their priority was to make the Java Platform accessible to the Linux community under GPL as quickly as possible br This answer triggered some reactions either criticizing Sun for not responding in a sufficiently open manner to an open letter or rather Apache Software Foundation some think that ASF acted unwisely to aggressively demand something they could have obtained with more diplomacy from Sun especially considering the timescale of the opening class library br Sun released the OpenJDK in May along with a specific license to allow to run the TCK in the OpenJDK context for any GPL implementation deriving substantially from OpenJDK This does not cover Apache Harmony which is not GPL licensed On December the Apache Software Foundation resigned from the Java Community Process Executive Committee in protest over the difficulty in obtaining a license acceptable to Apache for use with the Harmony project br br br Use in Android SDK br The virtual machine that is used in Google s Android platform Dalvik up to version and its successor Android Runtime ART uses a subset of Harmony for the core of its Class Library However Dalvik does not align to Java SE nor Java ME Class Library profiles for example J ME classes AWT and Swing are not supported br Android Nougat replaced Harmony with OpenJDK br br br End of the project br On October IBM by far the biggest participant in the project decided to join Oracle on the OpenJDK project effectively shifting its efforts from Harmony to the Oracle reference implementation Bob Sutor IBM s head of Linux and open source blogged that IBM will be shifting its development effort from the Apache Project Harmony to OpenJDK In March IBM s Tim Ellison announced that he resigned as Project Management Chair for Harmony After IBM s disengagement the project s activity level greatly declined br On October a poll was started on the harmony dev mailing list by the project lead Tim Ellison whether to retire the project The outcome on November was to in favor of retirement On November the Apache Software Foundation board of directors passed a motion to terminate the project One director Larry Rosen cast a no vote based on the timing rather than the merits of the proposal it was otherwise unanimous The project was retired on November br br br Development team br At the start Apache Harmony received some large code contributions from several companies Development discussions have taken place on open mailing lists Later the Apache Software foundation mentors put a lot of effort br into bringing the development process more in line with the Apache way and it seemed that their efforts were successful br br br Last development status br Apache Harmony was accepted among the official Apache projects on October br br br Architecture br The Dynamic Runtime Layer virtual machine consists of the following components br br The VM core with its subcomponents concentrates most of the JVM control functions br The porting layer hides platform specific details from other VM components behind a single interface and is based on the Apache Portable Runtime layer br The garbage collector allocates Java objects in the heap memory and reclaims unreachable objects using various algorithms br Execution Manager selects the execution engine for compiling a method handles profiles and the dynamic recompilation logic br Class Library is a Java standard library br The thread manager that handle operating system threading br The execution engine consists of the following br The just in time compiler for compilation and execution of method code br The interpreter for easier debugging br br br Support platform and operating system br The project provided a portable implementation that ease development on many platforms and operating systems The main focus was on Windows and Linux operating systems on x and x architectures br br br Class library coverage br The expected donations from software companies were actually received The Apache Harmony now contains the working code including the Swing AWT and Java D code which were contributed by Intel br As of February the Harmony project achieved completeness for JDK and for Java SE br The progress of the Apache Harmony project can be tracked against J SE and Java SE Also there is a branch for Harmony v in development for Java SE br Apache Harmony developers integrate several existing field tested open source projects to meet their goal not reinventing the wheel Many of these projects are mature and well known and other parts of the library needed to be written from scratch br This is a list of existing open source components that are used in the Apache Harmony project some of them were in use before the project started br br br Documentation br Harmony is less documented than the alternative free Java implementations For instance in GNU Classpath every method of the central CORBA class ORB has the explaining comment both in the standard abstract API class and implementation In the Yoko project used by Harmony most methods both in the standard declaration and implementing class were undocumented at the end of October Also GNU Classpath supported both older and newer CORBA features same as Sun s implementation Harmony differently left the central method of the older standard ORB connect Object fully unimplemented br br br Tools br A complete implementation of the Java platform also needs a compiler that translates Java source code into bytecodes a program that manages JAR files a debugger and an applet viewer and web browser plugin to name a few Harmony has the compiler appletviewer jarsigner javah javap keytool policytool and unpack br br br Virtual machine support br Harmony has seven virtual machine implementations that run Harmony Class Library all of which were donations by external groups br br JC Harmony Edition VM JCHEVM based on the JCVM s interpreter contributed by the author Archie Cobbs br BootJVM a simple bootstrapping virtual machine contributed by Daniel Lydick br SableVM an advanced portable interpreter contributed by authors from the Sable Research Group and the Dynamic Runtime Layer Virtual Machine br DRLVM a just in time compiler contributed by Intel br BEA announced the availability of an evaluation version of JRockit VM running Apache Harmony Class Library br JikesRVM an open source meta circular JVM that use the Apache Harmony Class Library br Ja NET SE an open source project providing a Java JDK class libraries tools etc that run on the NET Framework CLR Ja NET SE is based on the Apache Harmony Class Libraries br In the end of November the language support provided by these virtual machine was still incomplete and the build instructions recommended to use IBM s proprietary J instead to run the class library test suite However this is not necessary anymore as of July br As for the rest of the project DRLVM virtual machine development has now stalled as of May br br br Application status br Since its conception Harmony grew in its ability to execute non trivial Java applications As of July supported applications include br br Eclipse of the reference implementation RI test pass on Harmony s DRLVM class library br Apache Tomcat of the RI tests pass br JUnit of the RI tests pass br Apache Ant of the RI tests pass br Other applications pass with a high success rate such as Apache Derby Apache Axis Log j Apache Velocity Apache Cocoon jEdit and Apache Commons br However Harmony s incomplete library prevented it from launching some other applications br br ArgoUML because it needs a Java applet implementation which was still unavailable in Harmony br Apache Geronimo runs on Apache Harmony with some issues and workarounds br Vuze formerly Azureus because of unimplemented security classes br br br See also br br GNU Classpath br List of Java virtual machines br Free Java implementations br Java Class Library br OpenJDK br IcedTea br br br br br br External links br Official website br Apache Harmony FAQ br Apache Harmony source code repository br JavaOne Online Harmony Session br JavaOne Online Harmony Session br Apache Harmony by Geir Magnusson Jr at JavaPolis br The Java open source debate a good summary of the debate br What is the Future of Apache Harmony br Apache Harmony loses project manager