title: DOS
id: 21304364
DOS is a family of disk based operating systems for IBM PC compatible computers The DOS family primarily consists of IBM PC DOS and a rebranded version Microsoft s MS DOS both of which were introduced in Later compatible systems from other manufacturers include DR DOS ROM DOS PTS DOS and FreeDOS MS DOS dominated the IBM PC compatible market between and br Although the name has come to be identified specifically with this particular family of operating systems DOS is a platform independent acronym for disk operating system whose use predates the IBM PC Dozens of other operating systems also use the acronym beginning with the mainframe DOS from Others include Apple DOS Apple ProDOS Atari DOS Commodore DOS TRSDOS and AmigaDOS br br br History br br br Origins br br IBM PC DOS and the separately sold MS DOS and its predecessor DOS ran on Intel bit processors It was developed to be similar to Digital Research s CP M the dominant disk operating system for bit Intel and Zilog Z microcomputers in order to simplify porting CP M applications to MS DOS br br When IBM introduced the IBM PC built with the Intel microprocessor they needed an operating system Chairman John Opel had a conversation with fellow United Way National Board Executive Committee member Mary Maxwell Gates who referred Opel to her son Bill Gates for help with an compatible build of CP M IBM was then sent to Digital Research and a meeting was set up However initial negotiations for the use of CP M broke down Digital Research wished to sell CP M on a royalty basis while IBM sought a single license and to change the name to PC DOS Digital Research founder Gary Kildall refused and IBM withdrew br br IBM again approached Bill Gates Gates in turn approached Seattle Computer Products There programmer Tim Paterson had developed a variant of CP M intended as an internal product for testing SCP s new bit Intel CPU card for the S bus The system was initially named QDOS Quick and Dirty Operating System before being made commercially available as DOS Microsoft purchased DOS allegedly for US This became Microsoft Disk Operating System MS DOS introduced in br Within a year Microsoft licensed MS DOS to over other companies which supplied the operating system for their own hardware sometimes under their own names Microsoft later required the use of the MS DOS name with the exception of the IBM variant IBM continued to develop their version PC DOS for the IBM PC Digital Research became aware that an operating system similar to CP M was being sold by IBM under the same name that IBM insisted upon for CP M and threatened legal action IBM responded by offering an agreement they would give PC consumers a choice of PC DOS or CP M Kildall s version Side by side CP M cost US more than PC DOS and sales were low CP M faded with MS DOS and PC DOS becoming the marketed operating system for PCs and PC compatibles br Microsoft originally sold MS DOS only to original equipment manufacturers OEMs One major reason for this was that not all early PCs were IBM PC compatible DOS was structured such that there was a separation between the system specific device driver code IO SYS and the DOS kernel MSDOS SYS Microsoft provided an OEM Adaptation Kit OAK which allowed OEMs to customize the device driver code to their particular system By the early s most PCs adhered to IBM PC standards so Microsoft began selling a retail version of MS DOS starting with MS DOS br In the mid s Microsoft developed a multitasking version of DOS This version of DOS is generally referred to as European MS DOS because it was developed for ICL and licensed to several European companies This version of DOS supports preemptive multitasking shared memory device helper services and New Executable NE format executables None of these features were used in later versions of DOS but they were used to form the basis of the OS kernel This version of DOS is distinct from the widely released PC DOS which was developed by IBM and based upon DOS br br Digital Research attempted to regain the market lost from CP M initially with Concurrent DOS FlexOS and DOS Plus both compatible with both MS DOS and CP M software later with Multiuser DOS compatible with both MS DOS and CP M software and DR DOS compatible with MS DOS software Digital Research was bought by Novell and DR DOS became PalmDOS and Novell DOS later it was part of Caldera under the names OpenDOS and DR DOS Lineo and DeviceLogics br Gordon Letwin wrote in that DOS was when we first wrote it a one time throw away product intended to keep IBM happy so that they d buy our languages Microsoft expected that it would be an interim solution before Xenix The company planned to improve MS DOS over time so it would be almost indistinguishable from single user Xenix or XEDOS which would also run on the Motorola Zilog Z and LSI they would be upwardly compatible with Xenix which BYTE in described as the multi user MS DOS of the future br br IBM however did not want to replace DOS After AT T began selling Unix Microsoft and IBM began developing OS as an alternative The two companies later had a series of disagreements over two successor operating systems to DOS OS and Windows They split development of their DOS systems as a result The last retail version of MS DOS was MS DOS after this MS DOS became part of Windows and Me The last retail version of PC DOS was PC DOS also called PC DOS revision though IBM did later develop PC DOS for OEMs and internal use br The FreeDOS project began on June when Microsoft announced it would no longer sell or support MS DOS Jim Hall then posted a manifesto proposing the development of an open source replacement Within a few weeks other programmers including Pat Villani and Tim Norman joined the project A kernel the COMMAND COM command line interpreter shell and core utilities were created by pooling code they had written or found available There were several official pre release distributions of FreeDOS before the FreeDOS distribution was released on September Made available under the GNU General Public License GPL FreeDOS does not require license fees or royalties br br br Decline br br Early versions of Microsoft Windows ran on MS DOS By the early s the Windows graphical shell saw heavy use on new DOS systems In Windows was bundled as a standalone operating system that did not require a separate DOS license Windows and Windows and ME that followed it took over as the default OS kernel though the MS DOS component remained for compatibility With Windows and but not ME the MS DOS component could be run without starting Windows With DOS no longer required to use Windows the majority of users stopped using it directly br br br Continued use br br As of available compatible systems are FreeDOS ROM DOS PTS DOS RxDOS and REAL Some computer manufacturers including Dell and HP sell computers with FreeDOS as an OEM operating system And a few developers and computer engineers still use it because it is close to the hardware br br br Embedded systems br DOS s structure of accessing hardware directly allows it to be used in embedded devices The final versions of DR DOS are still aimed at this market ROM DOS is used as operating system for the Canon PowerShot Pro br br br Emulation br On Linux it is possible to run DOSEMU a Linux native virtual machine for running DOS programs at near native speed There are a number of other emulators for running DOS on various versions of Unix and Microsoft Windows such as DOSBox DOSBox is designed for legacy gaming e g King s Quest Doom on modern operating systems DOSBox includes its own implementation of DOS which is strongly tied to the emulator and cannot run on real hardware but can also boot MS DOS FreeDOS or other DOS operating systems if needed br br br Design br MS DOS and IBM PC DOS related operating systems are commonly associated with machines using the Intel x or compatible CPUs mainly IBM PC compatibles Machine dependent versions of MS DOS were produced for many non IBM compatible x based machines with variations from relabelling of the Microsoft distribution under the manufacturer s name to versions specifically designed to work with non IBM PC compatible hardware As long as application programs used DOS APIs instead of direct hardware access they could run on both IBM PC compatible and incompatible machines The original FreeDOS kernel DOS C was derived from DOS NT for the Motorola series of CPUs in the early s While these systems loosely resembled the DOS architecture applications were not binary compatible due to the incompatible instruction sets of these non x CPUs However applications written in high level languages could be ported easily br DOS is a single user single tasking operating system with basic kernel functions that are non reentrant only one program at a time can use them and DOS itself has no functionality to allow more than one program to execute at a time The DOS kernel provides various functions for programs an application program interface like character I O file management memory management program loading and termination br DOS provides the ability for shell scripting via batch files with the filename extension BAT Each line of a batch file is interpreted as a program to run Batch files can also make use of internal commands such as GOTO and conditional statements br The operating system offers an application programming interface that allows development of character based applications but not for accessing most of the hardware such as graphics cards printers or mice This required programmers to access the hardware directly usually resulting in each application having its own set of device drivers for each hardware peripheral Hardware manufacturers would release specifications to ensure device drivers for popular applications were available br br br Boot sequence br The bootstrap loader on PC compatible computers the master boot record is located beginning at the boot sector the first sector on the first track track zero of the boot disk The ROM BIOS will load this sector into memory at address h C h and typically check for a signature h AAh at offset FEh If the sector is not considered to be valid the ROM BIOS will try the next physical disk in the row otherwise it will jump to the load address with certain registers set up br If the loaded boot sector happens to be a Master Boot Record MBR as found on partitioned media it will relocate itself to h h in memory otherwise this step is skipped The MBR code will scan the partition table which is located within this sector for an active partition modern MBRs check if bit is set at offset BEh h n whereas old MBRs simply check for a value of h and if found load the first sector of the corresponding partition which holds the Volume Boot Record VBR of that volume into memory at h C h in the similar fashion as if it had been loaded by the ROM BIOS itself The MBR will then pass execution to the loaded portion with certain registers set up br The sector content loaded at h C h constitutes a VBR now VBRs are operating system specific and cannot be exchanged between different DOS versions in general as the exact behaviour differs between different DOS versions In very old versions of DOS such as DOS x the VBR would load the whole IO SYS IBMBIO COM file into memory at h h For this to work these sectors had to be stored in consecutive order on disk by SYS In later issues it would locate and store the contents of the first two entries in the root directory at h h and if they happen to reflect the correct boot files as recorded in the VBR the VBR would load the first consecutive sectors of the IO SYS IBMBIO COM file into memory at h h The VBR also has to take care to preserve the contents of the Disk Parameter Table DPT Finally it passes control to the loaded portion by jumping to its entry point with certain registers set up with considerable differences between different DOS versions br In later DOS versions where the VBR has loaded only the first sectors of the IO SYS IBMBIO COM file into memory the loaded portion contains another boot loader which will then load the remainder of itself into memory using the root directory information stored at h h For most versions the file contents still need to be stored in consecutive order on disk In older versions of DOS which were still loaded as a whole this step is skipped br The DOS system initialization code will initialize its built in device drivers and then load the DOS kernel located in MSDOS SYS on MS DOS systems into memory as well In Windows x the DOS system initialization code and built in device drivers and the DOS kernel are combined into a single IO SYS file while MSDOS SYS is used as a text configuration file br The CONFIG SYS file is then read to parse configuration parameters The SHELL variable specifies the location of the shell which defaults to COMMAND COM br The shell is loaded and executed br The startup batch file AUTOEXEC BAT is then run by the shell br The DOS system files loaded by the boot sector must be contiguous and be the first two directory entries As such removing and adding this file is likely to render the media unbootable It is however possible to replace the shell at will a method that can be used to start the execution of dedicated applications faster This limitation does not apply to any version of DR DOS where the system files can be located anywhere in the root directory and do not need to be contiguous Therefore system files can be simply copied to a disk provided that the boot sector is DR DOS compatible already br In PC DOS and DR DOS and above the DOS system files are named IBMBIO COM instead of IO SYS and IBMDOS COM instead of MSDOS SYS Older versions of DR DOS used DRBIOS SYS and DRBDOS SYS instead br Starting with MS DOS the binary system files IO SYS and MSDOS SYS were combined into a single file IO SYS whilst MSDOS SYS became a configuration file similar to CONFIG SYS and AUTOEXEC BAT If the MSDOS SYS BootGUI directive is set to the boot process will stop with the command processor typically COMMAND COM loaded instead of executing WIN COM automatically br br br File system br DOS uses a filesystem which supports filenames characters for the filename and characters for the extension Starting with DOS hierarchical directories are supported Each directory name is also format but the maximum directory path length is characters due to the internal current directory structure CDS tables that DOS maintains Including the drive name the maximum length of a fully qualified filename that DOS supports is characters using the format drive path filename ext followed by a null byte br DOS uses the File Allocation Table FAT filesystem This was originally FAT which supported up to clusters per drive DOS added support for FAT which used bit allocation entries and supported up to clusters per drive Compaq MS DOS added support for FAT B which removed the MiB drive limit and could support up to MiB Finally MS DOS the DOS component of Windows x added support for FAT which used bit allocation entries and could support hard drives up to GiB and beyond br Starting with DOS file redirector support was added to DOS This was initially used to support networking but was later used to support CD ROM drives with MSCDEX IBM PC DOS also had preliminary installable file system IFS support but this was unused and removed in DOS DOS also supported Block Devices Disk Drive devices loaded from CONFIG SYS that could be used under the DOS file system to support network devices br br br Drive naming scheme br br In DOS drives are referred to by identifying letters Standard practice is to reserve A and B for floppy drives On systems with only one floppy drive DOS assigns both letters to the drive prompting the user to swap disks as programs alternate access between them This facilitates copying from floppy to floppy or having a program run from one floppy while accessing its data on another Hard drives were originally assigned the letters C and D DOS could only support one active partition per drive As support for more hard drives became available this developed into first assigning a drive letter to each drive s active primary partition then making a second pass over the drives to allocate letters to logical drives in the extended partition then a third pass to give any other non active primary partitions their names where such additional partitions existed and contained a DOS supported file system Lastly DOS allocates letters for optical disc drives RAM disks and other hardware Letter assignments usually occur in the order the drivers are loaded but the drivers can instruct DOS to assign a different letter drivers for network drives for example typically assign letters nearer to the end of the alphabet br Because DOS applications use these drive letters directly unlike the dev directory in Unix like systems they can be disrupted by adding new hardware that needs a drive letter An example is the addition of a new hard drive having a primary partition where a pre existing hard drive contains logical drives in extended partitions the new drive will be assigned a letter that was previously assigned to one of the extended partition logical drives Moreover even adding a new hard drive having only logical drives in an extended partition would still disrupt the letters of RAM disks and optical drives This problem persisted through Microsoft s DOS based x versions of Windows until they were replaced by versions based on the NT line which preserves the letters of existing drives until the user changes them Under DOS this problem can be worked around by defining a SUBST drive and installing the DOS program into this logical drive The assignment of this drive would then be changed in a batch job whenever the application starts Under some versions of Concurrent DOS as well as under Multiuser DOS System Manager and REAL the reserved drive letter L will automatically be assigned to the corresponding load drive whenever an application starts br br br Reserved device names br br There are reserved device names in DOS that cannot be used as filenames regardless of extension as they are occupied by built in character devices These restrictions also affect several Windows versions in some cases causing crashes and security vulnerabilities br The reserved names are br br COM COM COM COM COM COM COM COM COM serial communication ports br CON for console br LPT LPT LPT LPT LPT LPT LPT LPT LPT line printers br AUX for auxiliary br PRN for printer br NUL for null devices added in DOS and PC DOS br In Windows and Windows typing in the location of the reserved name such as CON CON AUX AUX or PRN PRN crashes the operating system of which Microsoft has provided a security fix for the issue In Windows XP the name of the file or folder using a reserved name silently reverts to its previous name with no notification or error message In Windows Vista and later attempting to use a reserved name for a file or folder brings up an error message saying The specified device name is invalid br These names except for NUL have continued to be supported in all versions of MS DOS PC DOS and DR DOS ever since LST was also available in some OEM versions of MS DOS whereas other OEM versions of MS DOS already used LPT first line printer and COM first serial communication device instead as introduced with PC DOS In addition to LPT and LPT as well as COM to COM Hewlett Packard s OEM version of MS DOS for the HP Portable Plus also supported LST as alias for LPT and A as alias for COM it also supported PLT for plotters Otherwise COM LPT LPT and the CLOCK still named CLOCK in some issues of MS DOS clock device were introduced with DOS and COM and COM were added with DOS Only the multitasking MS DOS supported KEYBD and SCREEN DR DOS and higher and Multiuser DOS support an IDLE device for dynamic idle detection to saving power and improve multitasking LPT is an optional built in driver for a fourth line printer supported in some versions of DR DOS since CONFIG constitutes the real mode PnP manager in MS DOS br AUX typically defaults to COM and PRN to LPT LST but these defaults can be changed in some versions of DOS to point to other serial or parallel devices The PLT device present only in some HP OEM versions of MS DOS was reconfigurable as well br Filenames ended with a colon such as NUL conventionally indicate device names but the colon is not actually a part of the name of the built in device drivers Colons are not necessary to be typed in some cases for example br br It is still possible to create files or directories using these reserved device names such as through direct editing of directory data structures in disk sectors Such naming such as starting a file name with a space has sometimes been used by viruses or hacking programs to obscure files from users who do not know how to access these locations br br br Memory management br br DOS was designed for the Intel processor which can only directly access a maximum of MiB of RAM Both IBM and Microsoft chose kibibytes KiB as the maximum amount of memory available to programs and reserved the remaining KiB for video memory the read only memory of adapters on some video and network peripherals and the system s BIOS By some DOS applications were already hitting the memory limit while much of reserved was unused depending on the machine s specifications br Specifications were developed to allow access to additional memory The first was the Expanded Memory Specification EMS was designed to allow memory on an add on card to be accessed via a KiB page frame in the reserved upper memory area and later systems could use a virtual mode V mode memory manager like EMM to create expanded memory from extended memory without the need of an add on card The second specification was the Extended Memory Specification XMS for and later systems This provided a way to copy data to and from extended memory access to the byte high memory area directly above the first megabyte of memory and the upper memory block area Generally XMS support was provided by HIMEM SYS or a V mode memory manager like QEMM or MAX which also supported EMS br Starting with DOS DOS could directly take advantage of the HMA by loading its kernel code and disk buffers there via the DOS HIGH statement in CONFIG SYS DOS also allowed the use of available upper memory blocks via the DOS UMB statement in CONFIG SYS br br br DOS under OS and Windows br br The DOS emulation in OS and Windows runs in much the same way as native applications do They can access all of the drives and services and can even use the host s clipboard services Because the drivers for file systems and such forth reside in the host system the DOS emulation needs only provide a DOS API translation layer which converts DOS calls to OS or Windows system calls The translation layer generally also converts BIOS calls and virtualizes common I O port accesses which many DOS programs commonly use br In Windows and x the DOS virtual machine is provided by WINOLDAP WinOldAp creates a virtual machine based on the program s PIF file and the system state when Windows was loaded The DOS graphics mode both character and graphic can be captured and run in the window DOS applications can use the Windows clipboard by accessing extra published calls in WinOldAp and one can paste text through the WinOldAp graphics br The emulated DOS in OS and Windows NT is based upon DOS Although there is a default configuration config sys and autoexec bat one can use alternate files on a session by session basis It is possible to load drivers in these files to access the host system although these are typically third party br Under OS x and later the DOS emulation is provided by DOSKRNL This is a file that represents the combined IBMBIO COM and IBMDOS COM the system calls are passed through to the OS windowing services DOS programs run in their own environment the bulk of the DOS utilities are provided by bound DOS OS applications in the OS directory OS can run Windows applications by using a modified copy of Windows Win OS The modifications allow Windows programs to run seamlessly on the OS desktop or one can start a WinOS desktop similar to starting Windows from DOS br OS allows for DOS from Drive A VMDISK This is a real DOS like MS DOS or PC DOS One makes a bootable floppy disk of the DOS adds a number of drivers from OS and then creates a special image The DOS booted this way has full access to the system but provides its own drivers for hardware One can use such a disk to access cdrom drives for which there is no OS driver br In all bit IA editions of the Windows NT family since DOS emulation is provided by way of a virtual DOS machine NTVDM bit IA and x versions of Windows do not support NTVDM and cannot run bit DOS applications directly third party emulators such as DOSbox can be used to run DOS programs on those machines br br br User interface br DOS systems use a command line interface A program is started by entering its filename at the command prompt DOS systems include utility programs and provide internal commands that do not correspond to programs br In an attempt to provide a more user friendly environment numerous software manufacturers wrote file management programs that provided users with WIMP interfaces Microsoft Windows is a notable example eventually resulting in Microsoft Windows x becoming a self contained program loader and replacing DOS as the most used PC compatible program loader Text user interface programs included Norton Commander DOS Navigator Volkov Commander Quarterdesk DESQview and Sidekick Graphical user interface programs included Digital Research s GEM originally written for CP M and GEOS br Eventually the manufacturers of major DOS systems began to include their own environment managers MS DOS IBM DOS included DOS Shell DR DOS released the following year included ViewMAX based upon GEM br br br Terminate and stay resident br br Although DOS is not a multitasking operating system it does provide a terminate and stay resident TSR function which allows programs to remain resident in memory These programs can hook the system timer or keyboard interrupts to allow themselves to run tasks in the background or to be invoked at any time preempting the current running program and effectively implementing a simple form of multitasking on a program specific basis The DOS PRINT command does this to implement background print spooling Borland Sidekick a popup personal information manager PIM also uses this technique br Terminate and stay resident programs are also used to provide additional features not available by default Programs like CED and DOSKEY provide command line editing facilities beyond what is available in COMMAND COM Programs like the Microsoft CD ROM Extensions MSCDEX provide access to files on CD ROM disks br Some TSRs can even perform a rudimentary form of task switching For example the shareware program Back and Forth has a hotkey to save the state of the currently running program to disk load another program and switch to it making it possible to switch back and forth between programs albeit slowly due to the disk access required Back and Forth could not enable background processing however that needed DESQview on at least a br br br Software br br Arachne a bit graphical web browser br dBase database program br Harvard Graphics a presentation graphics design program br Lotus a spreadsheet which has been credited with the success of the IBM PC br Norton Commander and XTree file management utilities br PKZIP the utility that quickly became the standard in file compression br ProComm Qmodem and Telix modem communication programs br Sidekick personal information manager that could be used from within other programs br WordPerfect a word processor that was dominant in the s br WordStar word processor originally for CP M that became popular on the IBM PC br br br Development tools br BASIC language interpreters BASICA and GW BASIC br DJGPP the bit DPMI DOS port of gcc br Microsoft Macro Assembler Microsoft C and CodeView from Microsoft br Watcom C C from Watcom br Turbo Pascal Turbo BASIC Turbo C Turbo Prolog and Turbo Assembler from Borland br br br See also br COMMAND COM the command line interpreter for DOS and Windows x br CP M Digital Research early operating system similar to DOS br Disk Control Program DCP an MS DOS derivative by the former East German VEB Robotron br DOS API br DOS V br Index of DOS games br List of DOS operating systems br PC MOS a DOS compatible multiuser operating system br VGA compatible text mode the base of DOS s TUI on IBM PC compatibles br br br br br br Further reading br IBM Corp IBM January IBM DOS Release Cloth bound retail hard board box st edition IBM Corp Item Number br IBM Corp IBM January Disk Operating System User s guide DOS Release st edition Microsoft Corp pages including colour illustrations Item Number br IBM Corp IBM January Disk Operating System Manual DOS Release st edition Microsoft Corp looseleaf pages in ring folder Item No br Mueller Scott Upgrading and Repairing PCs Eighth ed Que Publishing ISBN Retrieved br Bailes Lenny Mueller John Memory Management and Multitasking Beyond K McGraw Hill ISBN Retrieved br br br External links br Origins of DOS articles and manuals by Tim Paterson br Timeline of DOS and Windows versions at the Wayback Machine archived br DOS where hardware is the only limit Archived from the original on Retrieved br Batfiles The DOS batch file programming handbook br The Rise of DOS How Microsoft Got the IBM PC OS Contract pcmag com Retrieved br Application Software DOS Short File Name Family www jumpjet info Archived from the original on Retrieved An archive of carefully hand selected FREE and abandoned software for DOS br Online Windows XP Simulator br MS DOS v v v Source Code