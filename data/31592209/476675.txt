title: Patch (Unix)
id: 476675
The computer tool patch is a Unix program that updates text files according to instructions contained in a separate file called a patch file The patch file also called a patch for short is a text file that consists of a list of differences and is produced by running the related diff program with the original and updated file as arguments Updating files with patch is often referred to as applying the patch or simply patching the files br br br History br The original patch program was written by Larry Wall who went on to create the Perl programming language and posted to mod sources which later became comp sources unix in May br patch was added to XPG which later became POSIX Wall s code remains the basis of patch programs provided in OpenBSD FreeBSD and schilytools The Open Software Foundation which merged into The Open Group is said to have maintained a derived version br The GNU project FSF maintains its patch forked from the Larry Wall version The repository is different from that of GNU diffutils but the documentation is managed together br br br Usage context br Developed by a programmer for other programmers patch was frequently used for updating source code to a newer version Because of this many people came to associate patches with source code whereas patches can in fact be applied to any text Patched files do not accumulate any unneeded text which is what some people perceive based on the English meaning of the word patch is as capable of removing text as it is of adding it br Patches described here should not be confused with binary patches which although can be conceptually similar are distributed to update binary files comprising the program to a new release br br br Patches in software development br The diff files that serve as input to patch are readable text files which means that they can be easily reviewed or modified by humans before use br In addition to the diff program diffs can also be produced by other programs such as Subversion CVS RCS Mercurial and Git br Patches have been the crucial component of many source control systems including CVS br br br Advanced diffs br br When more advanced diffs are used patches can be applied even to files that have been modified in the meantime as long as those modifications do not interfere with the patch This is achieved by using context diffs and unified diffs also known as unidiffs which surround each change with context which is the text immediately before and after the changed part Patch can then use this context to locate the region to be patched even if it has been displaced by changes earlier in the file using the line numbers in the diffs as a starting point Because of this property context and unified diffs are the preferred form of patches for submission to many software projects br The above features make diff and patch especially popular for exchanging modifications to open source software Outsiders can download the latest publicly available source code make modifications to it and send them in diff form to the development team Using diffs the development team has the ability to effectively review the patches before applying them and can apply them to a newer code base than the one the outside developer had access to br br br Usage examples br To create a patch one could run the following command in a shell br br To apply a patch one could run the following command in a shell br br This tells patch to apply the changes to the specified files described in mods diff Patches to files in subdirectories require the additional pnumber option where number is if the base directory of the source tree is included in the diff and otherwise br Patches can be undone or reversed with the R option br br In some cases when the file is not identical to the version the diff was generated against the patch will not be able to be applied cleanly For example if lines of text are inserted at the beginning the line numbers referred to in the patch will be incorrect patch is able to recover from this by looking at nearby lines to relocate the text to be patched It will also recover when lines of context for context and unified diffs are altered this is described as fuzz br br br Ports of patch br Originally written for Unix and Unix like systems patch has also been ported to Windows and many other platforms Windows ports of patch are provided by GnuWin and UnxUtils br A patch command is also part of ASCII s MSX DOS Tools for MSX DOS version br br br See also br Patch computing br Quilt software br rsync br xdelta br List of Unix commands br IBM Mainframe utility IEBUPDTE a mainframe patch program created about years earlier circa br br br br br br External links br br GNU Diffutils includes diff and patch Documentation br GNU tools for Win Win port of tools including diff and patch br Dickey Thomas E DIFFSTAT make histogram from diff output Archived from the original on Retrieved 