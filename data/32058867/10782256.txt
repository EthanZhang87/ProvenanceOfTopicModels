title: Dm-crypt
id: 10782256
dm crypt is a transparent block device encryption subsystem in Linux kernel versions and later and in DragonFly BSD It is part of the device mapper dm infrastructure and uses cryptographic routines from the kernel s Crypto API Unlike its predecessor cryptoloop dm crypt was designed to support advanced modes of operation such as XTS LRW and ESSIV in order to avoid watermarking attacks In addition to that dm crypt addresses some reliability problems of cryptoloop br dm crypt is implemented as a device mapper target and may be stacked on top of other device mapper transformations It can thus encrypt whole disks including removable media partitions software RAID volumes logical volumes as well as files It appears as a block device which can be used to back file systems swap or as an LVM physical volume br Some Linux distributions support the use of dm crypt on the root file system These distributions use initrd to prompt the user to enter a passphrase at the console or insert a smart card prior to the normal boot process br br br Frontends br The dm crypt device mapper target resides entirely in kernel space and is only concerned with encryption of the block device it does not interpret any data itself It relies on user space front ends to create and activate encrypted volumes and manage authentication At least two frontends are currently available cryptsetup and cryptmount br br br cryptsetup br br The cryptsetup command line interface by default does not write any headers to the encrypted volume and hence only provides the bare essentials encryption settings have to be provided every time the disk is mounted although usually employed with automated scripts and only one key can be used per volume the symmetric encryption key is directly derived from the supplied passphrase br Because it lacks a salt using cryptsetup is less secure in this mode than is the case with Linux Unified Key Setup LUKS However the simplicity of cryptsetup makes it useful when combined with third party software for example with smart card authentication br cryptsetup also provides commands to deal with the LUKS on disk format This format provides additional features such as key management and key stretching using PBKDF and remembers encrypted volume configuration across reboots br br br cryptmount br The cryptmount interface is an alternative to the cryptsetup tool that allows any user to mount and unmount a dm crypt file system when needed without needing superuser privileges after the device has been configured by a superuser br br br Features br The fact that disk encryption volume encryption software like dm crypt only deals with transparent encryption of abstract block devices gives it a lot of flexibility This means that it can be used for encrypting any disk backed file systems supported by the operating system as well as swap space write barriers implemented by file systems are preserved Encrypted volumes can be stored on disk partitions logical volumes whole disks as well as file backed disk images through the use of loop devices with the losetup utility dm crypt can also be configured to encrypt RAID volumes and LVM physical volumes br dm crypt can also be configured to provide pre boot authentication through an initrd thus encrypting all the data on a computer except the bootloader the kernel and the initrd image itself br When using the cipher block chaining mode of operation with predictable initialization vectors as other disk encryption software the disk is vulnerable to watermarking attacks This means that an attacker is able to detect the presence of specially crafted data on the disk To address this problem in its predecessors dm crypt included provisions for more elaborate disk encryption specific modes of operation Support for ESSIV encrypted salt sector initialization vector was introduced in Linux kernel version LRW in and XTS in br The Linux Crypto API includes support for most popular block ciphers and hash functions which are all usable with dm crypt br Crypted FS support include LUKS volumes loop AES and since Linux kernel the TrueCrypt target called tcw br br br Compatibility br dm crypt and LUKS encrypted disks can be accessed and used under MS Windows using the now defunct FreeOTFE formerly DoxBox LibreCrypt provided that the filesystem used is supported by Windows e g FAT FAT NTFS Encrypted ext and ext filesystems are supported by using Ext Fsd or so called Ext Installable File System for Windows FreeOTFE also supports them br Cryptsetup LUKS and the required infrastructure have also been implemented on the DragonFly BSD operating system br br br See also br br Comparison of disk encryption software br br br br br br External links br Official dm crypt cryptsetup luks and cryptmount websites br All about dm crypt and LUKS on one page on archive org a page covering dm crypt LUKS starting with theory and ending with many practical examples about its usage 